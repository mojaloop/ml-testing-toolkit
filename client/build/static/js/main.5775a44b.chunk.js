/*! For license information please see main.5775a44b.chunk.js.LICENSE.txt */
(this["webpackJsonpml-testing-toolkit-ui"]=this["webpackJsonpml-testing-toolkit-ui"]||[]).push([[0],{21:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return d}));var s=a(3),n=a.n(s),r=a(7),l=a(0),i=a.n(l),o=(a(17),a(693)),c=a(692),p=(a(55),a(196)),u=a.n(p),h=a(59);new(a.n(h).a)({allErrors:!0}),o.a.Option;u.a.option("alwaysFakeOptionals",!0);class m extends i.a.Component{constructor(){super(),this.componentDidMount=()=>{this.componentDidUpdate()},this.componentDidUpdate=()=>{if(this.state.factData!==this.props.factData){let e=[];this.props.factData&&(e=this.getNodeFacts(this.props.factData));let t=void 0;if(this.props.value){t=this.props.value;const e=this.findValueInFactData(t,this.props.factData);this.props.onSelect(t,e)}this.setState({treeData:e,factData:this.props.factData,value:t})}},this.findValueInFactData=(e,t)=>{const a=e.split(".");let s=this.props.factData;for(let n=0;n<a.length;n++){const e=this.getNodeFacts(s).find(e=>e.value===a[n]);if(!e)return null;s=e.nodeObject}return s},this.getNodeFacts=(e,t=0,a="")=>{let s=[];for(let n in e.properties){let r=!0;const l=e.properties[n];"object"===l.type&&(r=!1);let i=Math.random().toString(36).substring(2,6);s.push({id:i,pId:t,value:a+n,nodeObject:l,title:n,isLeaf:r,disabled:!r&&!this.props.enableNodesSelection})}return s},this.onLoadData=t=>new Promise(a=>{const s=t.props,n=s.id,r=s.nodeObject,l=s.value;e(()=>{this.setState({treeData:this.state.treeData.concat(this.getNodeFacts(r,n,l+"."))}),a()})}),this.onChange=(e,t,a)=>{this.setState({value:e}),this.props.onSelect(e,a.triggerNode.props.nodeObject)},this.state={value:void 0,treeData:[],factData:null}}render(){const e=this.state.treeData;return i.a.createElement(c.a,{treeDataSimpleMode:!0,style:{width:"100%",minWidth:"200px"},value:this.state.value,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",onChange:this.onChange,loadData:this.onLoadData,treeData:e})}}class d{constructor(){this.getBodyFactData=e=>{let t={};try{t=e.requestBody.content["application/json"].schema}catch(a){}return t},this.getBodySample=e=>{let t=null;try{t=e["x-examples"]["application/json"]}catch(a){}return t},this.getHeadersFactData=(e,t)=>{let a,s={properties:{}};a=t?[...t]:[];try{a.concat(e.parameters).forEach(e=>{"header"===e.in&&(s.properties[e.name]=e.schema)})}catch(n){console.log(n)}return s},this.getCustomFactData=e=>{let t={properties:{}};try{e.forEach(e=>{t.properties[e]={type:"string"}})}catch(a){console.log(a)}return t},this.getPathParametersFactData=e=>{let t={properties:{}};try{e.forEach(e=>{"path"===e.in&&(t.properties[e.name]=e.schema)})}catch(a){console.log(a)}return t},this.getQueryParametersFactData=e=>{let t={properties:{}};try{e.forEach(e=>{"query"===e.in&&(t.properties[e.name]=e.schema)})}catch(a){console.log(a)}return t},this.getSelectedResponseBodySchema=(e,t)=>{let a={};try{a=e[t].content["application/json"].schema}catch(s){}return a},this.getSelectedResponseHeaders=e=>{let t={};try{t=e[this.pickSuccessCodeFromResponsesObject(e)].headers}catch(a){}return t},this.pickSuccessCodeFromResponsesObject=e=>{let t;for(let a in e)if(a>=200&&a<=299){t=a;break}return t||"default"},this.generateSample=function(){var e=Object(r.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.resolve(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}).call(this,a(240).setImmediate)},316:function(e,t,a){e.exports=a(691)},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},484:function(e,t,a){},517:function(e,t){},525:function(e,t){},527:function(e,t){},669:function(e,t){},672:function(e,t,a){},690:function(e,t,a){e.exports=a.p+"static/media/mojaloop.89213192.png"},691:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(6),l=a.n(r),i=a(735),o=a(737),c=a(313),p=a(733),u=(a(321),a(322),a(323),a(697)),h=a(192),m=a(696);class d extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{className:"navbar-top navbar-dark",expand:"md",id:"navbar-main"},n.a.createElement(u.a,{fluid:!0},n.a.createElement(h.a,{className:"h4 mb-0 text-white text-uppercase d-none d-lg-inline-block",to:"/"},this.props.brandText))))}}var g=d;class E extends n.a.Component{render(){return null}}var f=E,b=a(700),C=a(698),v=a(699),y=a(701),k=a(702),R=a(738),P=a(703),D=a(704),S=a(705),x=a(706),F=a(707),N=a(708),w=a(709),O=a(710),V=a(711),A=a(712),T=a(299);class I extends n.a.Component{constructor(e){super(e),this.state={collapseOpen:!1},this.toggleCollapse=()=>{this.setState({collapseOpen:!this.state.collapseOpen})},this.closeCollapse=()=>{this.setState({collapseOpen:!1})},this.createLinks=e=>e.map((e,t)=>n.a.createElement(C.a,{key:t},n.a.createElement(v.a,{to:e.layout+e.path,tag:b.a,onClick:this.closeCollapse,activeClassName:"active"},n.a.createElement("i",{className:e.icon}),e.name,n.a.createElement("br",null)," ",e.subTitle))),this.activeRoute.bind(this)}activeRoute(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}render(){const e=this.props,t=(e.bgColor,e.routes),a=e.logo;let s;return a&&a.innerLink?s={to:a.innerLink,tag:h.a}:a&&a.outterLink&&(s={href:a.outterLink,target:"_blank"}),n.a.createElement(m.a,{className:"navbar-vertical fixed-left navbar-light bg-white",expand:"md",id:"sidenav-main"},n.a.createElement(u.a,{fluid:!0},n.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},n.a.createElement("span",{className:"navbar-toggler-icon"})),a?n.a.createElement(y.a,Object.assign({className:"pt-0"},s),n.a.createElement("img",{alt:a.imgAlt,className:"navbar-brand-img",src:a.imgSrc}),n.a.createElement("br",null),n.a.createElement("h4",{className:"mb-0"},"Testing Toolkit")):null,n.a.createElement(k.a,{className:"align-items-center d-md-none"},n.a.createElement(R.a,{nav:!0},n.a.createElement(P.a,{nav:!0,className:"nav-link-icon"},n.a.createElement("i",{className:"ni ni-bell-55"})),n.a.createElement(D.a,{"aria-labelledby":"navbar-default_dropdown_1",className:"dropdown-menu-arrow",right:!0},n.a.createElement(S.a,null,"Action"),n.a.createElement(S.a,null,"Another action"),n.a.createElement(S.a,{divider:!0}),n.a.createElement(S.a,null,"Something else here")))),n.a.createElement(x.a,{navbar:!0,isOpen:this.state.collapseOpen},n.a.createElement("div",{className:"navbar-collapse-header d-md-none"},n.a.createElement(F.a,null,a?n.a.createElement(N.a,{className:"collapse-brand",xs:"6"},a.innerLink?n.a.createElement(h.a,{to:a.innerLink},n.a.createElement("img",{alt:a.imgAlt,src:a.imgSrc})):n.a.createElement("a",{href:a.outterLink},n.a.createElement("img",{alt:a.imgAlt,src:a.imgSrc}))):null,n.a.createElement(N.a,{className:"collapse-close",xs:"6"},n.a.createElement("button",{className:"navbar-toggler",type:"button",onClick:this.toggleCollapse},n.a.createElement("span",null),n.a.createElement("span",null))))),n.a.createElement(w.a,{className:"mt-4 mb-3 d-md-none"},n.a.createElement(O.a,{className:"input-group-rounded input-group-merge"},n.a.createElement(V.a,{"aria-label":"Search",className:"form-control-rounded form-control-prepended",placeholder:"Search",type:"search"}),n.a.createElement(A.a,{addonType:"prepend"},n.a.createElement(T.a,null,n.a.createElement("span",{className:"fa fa-search"}))))),n.a.createElement(k.a,{navbar:!0},this.createLinks(t)),n.a.createElement("hr",{className:"my-3"}))))}}I.defaultProps={routes:[{}]};var q=I,j=(a(2),a(64)),M=a.n(j),H=a(194),z=a(713),_=a(714),L=a(715),B=a(297),U=a(716),K=a(717),J=a(88);class $ extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"header bg-gradient-default opacity-8 pb-6 pt-7 pt-lg-7 d-flex align-items-center",style:{minHeight:"150px",backgroundSize:"cover",backgroundPosition:"center top"}}))}}var W=$;class G extends n.a.Component{constructor(...e){super(...e),this.state={activeNav:1,chartExample1Data:"data1"},this.toggleNavs=(e,t)=>{e.preventDefault(),this.setState({activeNav:t,chartExample1Data:"data1"===this.state.chartExample1Data?"data2":"data1"});let a=()=>{console.log(this.state)};a.bind(this),setTimeout(()=>a(),1e3)}}componentWillMount(){window.Chart&&Object(J.parseOptions)(M.a,Object(J.chartOptions)())}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(F.a,null,n.a.createElement(N.a,{xl:"6"},n.a.createElement(z.a,{className:"shadow"},n.a.createElement(_.a,{className:"bg-transparent"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h6",{className:"text-uppercase text-muted ls-1 mb-1"},"Resource Hits"),n.a.createElement("h2",{className:"mb-0"},"Incoming")))),n.a.createElement(L.a,null,n.a.createElement("div",{className:"chart"},n.a.createElement(H.a,{data:J.chartExample2.data,options:J.chartExample2.options}))))),n.a.createElement(N.a,{xl:"6"},n.a.createElement(z.a,{className:"shadow"},n.a.createElement(_.a,{className:"bg-transparent"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h6",{className:"text-uppercase text-muted ls-1 mb-1"},"Resource Hits"),n.a.createElement("h2",{className:"mb-0"},"Outgoing")))),n.a.createElement(L.a,null,n.a.createElement("div",{className:"chart"},n.a.createElement(H.a,{data:J.chartExample2.data,options:J.chartExample2.options})))))),n.a.createElement(F.a,{className:"mt-5"},n.a.createElement(N.a,{className:"mb-5 mb-xl-0",xl:"8"},n.a.createElement(z.a,{className:"shadow"},n.a.createElement(_.a,{className:"border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h3",{className:"mb-0"},"Requests and Responses")),n.a.createElement("div",{className:"col text-right"},n.a.createElement(B.a,{color:"primary",href:"#pablo",onClick:e=>e.preventDefault(),size:"sm"},"See all")))),n.a.createElement(U.a,{className:"align-items-center table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Resource name"),n.a.createElement("th",{scope:"col"},"Hits"),n.a.createElement("th",{scope:"col"},"Responses Sent"),n.a.createElement("th",{scope:"col"},"Percentage"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"GET /parties/Type/ID"),n.a.createElement("td",null,"4,569"),n.a.createElement("td",null,"340"),n.a.createElement("td",null,"46,53%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"POST /quotes"),n.a.createElement("td",null,"3,985"),n.a.createElement("td",null,"319"),n.a.createElement("td",null,"46,53%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"POST /transfer"),n.a.createElement("td",null,"3,513"),n.a.createElement("td",null,"294"),n.a.createElement("td",null,"36,49%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /parties/Type/ID"),n.a.createElement("td",null,"2,050"),n.a.createElement("td",null,"147"),n.a.createElement("td",null,"50,87%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /quotes/ID"),n.a.createElement("td",null,"1,795"),n.a.createElement("td",null,"190"),n.a.createElement("td",null,"46,53%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /transfer/ID"),n.a.createElement("td",null,"1,795"),n.a.createElement("td",null,"190"),n.a.createElement("td",null,"46,53%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /parties/Type/ID/error"),n.a.createElement("td",null,"2,050"),n.a.createElement("td",null,"147"),n.a.createElement("td",null,"50,87%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /quotes/ID/error"),n.a.createElement("td",null,"1,795"),n.a.createElement("td",null,"190"),n.a.createElement("td",null,"46,53%")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"PUT /transfer/ID/error"),n.a.createElement("td",null,"1,795"),n.a.createElement("td",null,"190"),n.a.createElement("td",null,"46,53%")))))),n.a.createElement(N.a,{xl:"4"},n.a.createElement(z.a,{className:"shadow"},n.a.createElement(_.a,{className:"border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement("div",{className:"col"},n.a.createElement("h3",{className:"mb-0"},"Rules Engine Hits")),n.a.createElement("div",{className:"col text-right"},n.a.createElement(B.a,{color:"primary",href:"#pablo",onClick:e=>e.preventDefault(),size:"sm"},"See all")))),n.a.createElement(U.a,{className:"align-items-center table-flush",responsive:!0},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Rules Engine"),n.a.createElement("th",{scope:"col"},"Hits"),n.a.createElement("th",{scope:"col"},"Percentage"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Validation Rules"),n.a.createElement("td",null,"1,480"),n.a.createElement("td",null,n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement("span",{className:"mr-2"},"30%"),n.a.createElement("div",null,n.a.createElement(K.a,{max:"100",value:"60",barClassName:"bg-gradient-danger"}))))),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Callback Rules"),n.a.createElement("td",null,"5,480"),n.a.createElement("td",null,n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement("span",{className:"mr-2"},"70%"),n.a.createElement("div",null,n.a.createElement(K.a,{max:"100",value:"70",barClassName:"bg-gradient-success"}))))))))))))}}var Q=G,X=a(36),Z=a(3),Y=a.n(Z),ee=a(7),te=a(693),ae=a(725),se=a(722),ne=a(730),re=a(12),le=a(724),ie=a(723),oe=(a(55),a(17)),ce=a.n(oe),pe=a(718),ue=a(74),he=(a(114),a(58)),me=a.n(he),de=(a(115),a(116),a(117),a(484),a(103)),ge=a(739),Ee=a(21),fe=a(59),be=a.n(fe);const Ce=new be.a({allErrors:!0}),ve=te.a.Option;class ye extends n.a.Component{constructor(){super(),this.validateAjv=null,this.handleValueChange=e=>{if(this.props.selectedFact){this.validateAjv=Ce.compile(this.props.selectedFact),this.validateAjv(e)?(this.props.onChange(e),this.setState({ajvErrors:""})):(this.props.onChange(e),this.setState({ajvErrors:this.validateAjv.errors}))}},this.getValueInput=()=>this.props.selectedFact&&this.props.selectedFact.enum?n.a.createElement(te.a,{onChange:this.handleValueChange,value:this.props.value},this.props.selectedFact.enum.map(e=>n.a.createElement(ve,{key:e,value:e},e))):n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Value",value:this.props.value,onChange:e=>this.handleValueChange(e.target.value)})),this.getErrorMessage=()=>this.props.selectedFact&&this.props.selectedFact.enum?null:this.state.ajvErrors&&this.state.ajvErrors.length>0?n.a.createElement(n.a.Fragment,null,n.a.createElement(de.a,{title:Ce.errorsText(this.state.ajvErrors)},n.a.createElement(ge.a,{color:"red"},"errors found"))):void 0,this.state={ajvErrors:null}}render(){return n.a.createElement(n.a.Fragment,null,this.getValueInput(),this.getErrorMessage())}}class ke extends n.a.Component{constructor(){var e;super(),e=this,this.componentDidMount=Object(ee.a)(Y.a.mark((function t(){var a,s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.allFactTypes.find(t=>t.name===e.props.condition.fact),s=e.props.condition.path,n=[],e.props.rootParameters&&(n=n.concat(e.props.rootParameters)),e.props.resourceDefinition&&e.props.resourceDefinition.parameters&&(n=n.concat(e.props.resourceDefinition.parameters)),t.next=7,e.setState({selectedFactType:a,selectedFactPath:s,allParameters:n});case 7:e.updateFactData();case 8:case"end":return t.stop()}}),t)}))),this.handleValueChange=e=>{this.props.condition.value=e,this.props.onConditionChange()},this.handleDelete=()=>{this.props.onDelete(this.props.index),this.props.onConditionChange()},this.factTypes=[{title:"Request Body",name:"body"},{title:"Request Headers",name:"headers"}],this.allFactTypes=[{title:"Request Body",name:"body"},{title:"Request Headers",name:"headers"},{title:"Request Path Parameters",name:"pathParams"},{title:"Request Query Parameters",name:"queryParams"}],this.havePathParams=()=>{if(this.state.allParameters){if(this.state.allParameters.find(e=>"path"===e.in))return!0}return!1},this.haveQueryParams=()=>{if(this.state.allParameters){if(this.state.allParameters.find(e=>"query"===e.in))return!0}return!1},this.getFactTypeItems=()=>{let e=[...this.factTypes];return this.havePathParams()&&e.push({title:"Request Path Parameters",name:"pathParams"}),this.haveQueryParams()&&e.push({title:"Request Query Parameters",name:"queryParams"}),e.map(e=>n.a.createElement(ve,{key:e.name,value:JSON.stringify(e)},e.title))},this.updateFactData=()=>{if(this.state.selectedFactType)switch(this.state.selectedFactType.name){case"body":this.setState({factData:(new Ee.a).getBodyFactData(this.props.resourceDefinition)});break;case"headers":this.setState({factData:(new Ee.a).getHeadersFactData(this.props.resourceDefinition,this.props.rootParameters)});break;case"pathParams":this.setState({factData:(new Ee.a).getPathParametersFactData(this.state.allParameters)});break;case"queryParams":this.setState({factData:(new Ee.a).getQueryParametersFactData(this.state.allParameters)});break;default:this.setState({factData:null})}else this.setState({factData:null})},this.handleFactTypeSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=JSON.parse(a),t.next=4,e.setState({selectedFactType:s,selectedFact:null,selectedFactPath:null});case 4:e.props.condition.fact=s.name,e.props.onConditionChange(),e.updateFactData(),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.handleFactSelect=(e,t)=>{let a=null;this.props.condition.path===e&&(a=this.props.condition.operator),this.setState({selectedFact:t,selectedOperator:a,selectedFactPath:e}),this.props.condition.path=e,this.props.condition.operator=a,this.props.onConditionChange()},this.handleOperatorSelect=e=>{try{this.setState({selectedOperator:e}),this.props.condition.operator=e,this.props.onConditionChange()}catch(t){}},this.operatorDisplayNames={numericEqual:"Equal",numericNotEqual:"Not Equal",numericLessThan:"Less Than",numericGreaterThan:"Greater Than",numericLessThanInclusive:"Less Than or Equal to",numericGreaterThanInclusive:"Greater Than or Equal to",dateBefore:"Before",dateAfter:"After"},this.propertyTitleOperators={Amount:["numericEqual","numericNotEqual","numericLessThan","numericGreaterThan","numericLessThanInclusive","numericGreaterThanInclusive"]},this.getOperatorItems=()=>{let e=[];return this.state.selectedFact&&("string"===this.state.selectedFact.type?this.propertyTitleOperators[this.state.selectedFact.title]?this.propertyTitleOperators[this.state.selectedFact.title].map(t=>{let a=t;this.operatorDisplayNames[t]&&(a=this.operatorDisplayNames[t]),e.push({displayName:a,name:t})}):(e.push({displayName:"Equal",name:"equal"}),e.push({displayName:"Not Equal",name:"notEqual"})):"integer"===this.state.selectedFact.type?(e.push({displayName:"Equal",name:"equal"}),e.push({displayName:"Not Equal",name:"notEqual"}),e.push({displayName:"Less Than",name:"lessThan"}),e.push({displayName:"Less Than or Equal to",name:"lessThanInclusive"}),e.push({displayName:"Greater Than",name:"greaterThan"}),e.push({displayName:"Greater Than or Equal to",name:"greaterThanInclusive"})):(e.push({displayName:"Equal",name:"equal"}),e.push({displayName:"Not Equal",name:"notEqual"}))),e.map(e=>n.a.createElement(ve,{key:e.name,value:e.name},e.displayName))},this.state={selectedFactType:null,selectedFact:null,selectedFactPath:null,factData:null,selectedOperator:null,allParameters:[]}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(U.a,{className:"shadow"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Fact Type"),n.a.createElement("br",null),n.a.createElement(te.a,{value:JSON.stringify(this.state.selectedFactType),onChange:this.handleFactTypeSelect,style:{minWidth:"150px"}},this.getFactTypeItems()))),n.a.createElement("td",null,n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Fact"),n.a.createElement("br",null),n.a.createElement(Ee.b,{factData:this.state.factData,value:this.state.selectedFactPath,onSelect:this.handleFactSelect}))),n.a.createElement("td",null,n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Operator"),n.a.createElement("br",null),n.a.createElement(te.a,{style:{width:180},value:this.state.selectedOperator,onChange:this.handleOperatorSelect},this.getOperatorItems())))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"2"},n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-country"},"Value"),n.a.createElement("br",null),n.a.createElement(ye,{value:this.props.condition.value,selectedFact:this.state.selectedFact,onChange:this.handleValueChange}))),n.a.createElement("td",{align:"right"},n.a.createElement("br",null),n.a.createElement(B.a,{color:"danger",onClick:this.handleDelete,size:"sm"},"Delete"))))))}}class Re extends n.a.Component{constructor(...e){super(...e),this.handleConditionChange=e=>{this.props.onConditionsChange()},this.handleConditionDelete=e=>{this.props.conditions.splice(e,1)}}render(){return n.a.createElement(n.a.Fragment,null,this.props.conditions.map((e,t)=>n.a.createElement(F.a,{key:t},n.a.createElement(ke,{condition:e,index:t,resource:this.props.resource,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,onConditionChange:this.handleConditionChange,onDelete:this.handleConditionDelete}))))}}class Pe extends n.a.Component{constructor(){super(),this.newCondition={fact:null,operator:null,value:null},this.addCondition=()=>{this.props.conditions.push(Object(X.a)({},this.newCondition)),this.handleConditionsChange()},this.handleConditionsChange=()=>{this.props.onChange({conditions:this.props.conditions})},this.state={}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Re,{conditions:this.props.conditions,resource:this.props.resource,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,onConditionsChange:this.handleConditionsChange}),n.a.createElement(B.a,{color:"primary",onClick:()=>this.addCondition(),disabled:!this.props.resource,size:"sm"},"Add Condition"))}}var De=Pe,Se=a(45),xe=a.n(Se),Fe=a(734),Ne=a(726),we=a(719),Oe=a(727);const Ve=new be.a({allErrors:!0}),Ae=te.a.Option;class Te extends n.a.Component{constructor(){var e;super(),e=this,this.modes=[],this.inputValue=null,this.getModeMenu=()=>this.modes.map((e,t)=>n.a.createElement(Ae,{key:t,value:t},e)),this.handleModeChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=null,t.t0=a,t.next=0===t.t0?4:1===t.t0?6:2===t.t0?8:10;break;case 4:return s=(new Ee.a).getPathParametersFactData(e.props.rootParameters),t.abrupt("break",11);case 6:return s=(new Ee.a).getBodyFactData(e.props.resourceDefinition),t.abrupt("break",11);case 8:return s=(new Ee.a).getHeadersFactData(e.props.resourceDefinition,e.props.rootParameters),t.abrupt("break",11);case 10:s=null;case 11:return t.next=13,e.setState({mode:a,factData:s});case 13:e.updateChanges();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getValueComponent=()=>{switch(this.state.mode){case 0:case 1:case 2:return n.a.createElement(Ee.b,{key:this.props.name,factData:this.state.factData,onSelect:this.handleFactSelect});case 3:default:return null}},this.handleFactTypeSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=JSON.parse(a),t.next=4,e.setState({selectedFactType:s});case 4:e.props.condition.fact=s.name,e.props.onConditionChange(),e.updateFactData(),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.handleFactSelect=(e,t)=>{this.inputValue=e,this.updateChanges()},this.updateChanges=()=>{let e="";switch(this.inputValue||(this.inputValue=""),this.state.mode){case 0:e="{$request.params."+this.inputValue+"}";break;case 1:e="{$request.body."+this.inputValue+"}";break;case 2:e="{$request.header."+this.inputValue+"}";break;case 3:e="{$session.negotiatedContentType}";break;default:e=this.inputValue}this.props.onChange(e)},this.handleValueChange=e=>{this.inputValue=e,this.updateChanges()},this.state={mode:null,factData:null},this.modes[0]="Request Path Parameter",this.modes[1]="Request Body Parameter",this.modes[2]="Request Header Parameter",this.modes[3]="Negotiated Content Type"}render(){return n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.modes[this.state.mode],onSelect:this.handleModeChange},this.getModeMenu())),n.a.createElement(N.a,null,this.getValueComponent()))}}class Ie extends n.a.Component{constructor(){var e;super(),e=this,this.bodySchema={},this.componentDidMount=()=>{this.bodySchema=(new Ee.a).getBodyFactData(this.props.callbackDefinition);let e=[];this.props.callbackRootParameters&&(e=e.concat(this.props.callbackRootParameters)),this.props.callbackDefinition.parameters&&(e=e.concat(this.props.callbackDefinition.parameters));let t={};for(let a in e)t[e[a].name]={description:e[a].description};this.setState({allParamsFromDefinition:e,allParamsObject:t})},this.addHeaderItemsFromDefinition=function(){var t=Object(ee.a)(Y.a.mark((function t(a=!1){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.allParamsFromDefinition.forEach(t=>{"header"===t.in&&(a&&!t.required||(e.props.eventParams.headers?e.props.eventParams.headers[t.name]||(e.props.eventParams.headers[t.name]=""):(e.props.eventParams.headers={},e.props.eventParams.headers[t.name]="")))}),e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),this.addHeaderItem=e=>{this.props.eventParams.headers||(this.props.eventParams.headers={}),this.props.eventParams.headers[e]=this.props.eventParams.headers[e]?this.props.eventParams.headers[e]:"",this.updateChanges()},this.handleHeaderItemChange=(e,t,a)=>{this.props.eventParams.headers[t]=a,this.updateChanges()},this.handleHeaderItemDelete=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.props.eventParams.headers[a],e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleBodyChange=e=>{this.props.eventParams.body=e,this.updateChanges()},this.handleAddHeaderClick=e=>{this.addHeaderItem(e.item.props.children)},this.headerItemsMenu=()=>{const e=this.state.allParamsFromDefinition.filter(e=>"header"===e.in).map((e,t)=>n.a.createElement(ae.a.Item,{key:t},e.name));return n.a.createElement(ae.a,{onClick:this.handleAddHeaderClick},e)},this.updateChanges=()=>{const e={};e.headers=this.props.eventParams.headers,e.body=this.props.eventParams.body,this.props.onChange(e)},this.getHeaderItems=()=>{let e=[],t=0;if(this.props.eventParams)for(let a in this.props.eventParams.headers){const s={name:a,value:this.props.eventParams.headers[a]},r=t++;e.push(n.a.createElement(qe,{key:r,itemKey:s.name,name:s.name,value:s.value,description:this.state.allParamsObject[s.name]?this.state.allParamsObject[s.name].description:null,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition,onChange:this.handleHeaderItemChange,onDelete:this.handleHeaderItemDelete}))}return e},this.handleAddConfigParam=e=>{this.setState({configurableParameterSelected:e})},this.handlePopulateSampleBodyClick=Object(ee.a)(Y.a.mark((function t(){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=(new Ee.a).getBodySample(e.props.callbackDefinition))&&(e.props.callbackObject&&e.props.callbackObject.bodyOverride&&xe.a.merge(a,e.props.callbackObject.bodyOverride),e.props.eventParams.body=a,e.refs.bodyEditor.jsonEditor.update(e.props.eventParams.body),e.updateChanges());case 2:case"end":return t.stop()}}),t)}))),this.handleConfigParamCopyToClipboard=()=>{navigator.clipboard.writeText(this.state.configurableParameterSelected),ne.a.success("Copied to clipboard")},this.state={configurableParameterSelected:"",allParamsFromDefinition:[],allParamsObject:{}}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Te,{onChange:this.handleAddConfigParam,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition}))),this.state.configurableParameterSelected?n.a.createElement(F.a,{className:"mt-4 text-center"},n.a.createElement(N.a,null,n.a.createElement(ge.a,{color:"geekblue"},n.a.createElement("a",{onClick:this.handleConfigParamCopyToClipboard},this.state.configurableParameterSelected)))):null);return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Fe.a,{size:"small",title:"Headers"},n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"12"},n.a.createElement(pe.a,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"4"},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Name")),n.a.createElement(N.a,{lg:"4"},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Value"))),this.getHeaderItems()),n.a.createElement(Ne.a,{overlay:this.headerItemsMenu()},n.a.createElement(B.a,{color:"primary",size:"sm",onClick:e=>e.preventDefault()},"Add Header")),n.a.createElement(B.a,{color:"danger",onClick:()=>this.addHeaderItemsFromDefinition(!0),size:"sm"},"Add Required Headers"),n.a.createElement(B.a,{color:"info",onClick:()=>this.addHeaderItemsFromDefinition(!1),size:"sm"},"Add All Headers")))))),n.a.createElement(F.a,{className:"mt-2"},n.a.createElement(N.a,null,n.a.createElement(Fe.a,{size:"small",title:"Body"},n.a.createElement(F.a,{className:"mb-2"},n.a.createElement(N.a,{lg:"6"},n.a.createElement(we.a,{content:e,title:"Select a Configurable Parameter",trigger:"click"},n.a.createElement(B.a,{color:"secondary",size:"sm"},"Add Configurable Params"))),n.a.createElement(N.a,{lg:"6",style:{textAlign:"right"}},n.a.createElement(B.a,{color:"success",size:"sm",onClick:this.handlePopulateSampleBodyClick},"Populate with sample body"))),n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"12"},n.a.createElement(ue.a,{ref:"bodyEditor",value:this.props.eventParams.body?this.props.eventParams.body:{},ace:me.a,ajv:Ve,theme:"ace/theme/tomorrow_night_blue",mode:"code",search:!1,statusBar:!1,navigationBar:!1,onChange:this.handleBodyChange,schema:this.bodySchema})))))))}}class qe extends n.a.Component{constructor(){super(),this.inputValue=null,this.componentDidMount=()=>{this.inputValue=this.props.value},this.componentDidUpdate=()=>{this.inputValue=this.props.value},this.handleNameChange=e=>{this.props.onChange(this.props.itemKey,e.target.value,this.props.value)},this.handleAddConfigParam=e=>{this.inputValue=e,this.props.onChange(this.props.itemKey,this.props.name,this.inputValue)},this.handleValueChange=e=>{this.inputValue=e.target.value,this.props.onChange(this.props.itemKey,this.props.name,this.inputValue)},this.handleDelete=()=>{this.props.onDelete(this.props.itemKey)},this.state={name:"",value:""}}render(){const e=n.a.createElement(Te,{name:this.props.name,value:this.props.value,onChange:this.handleAddConfigParam,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition});return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"4"},n.a.createElement(de.a,{placement:"topLeft",title:this.props.description},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Name",type:"text",defaultValue:this.props.name,value:this.props.name,onChange:this.handleNameChange,disabled:!1}))),n.a.createElement(N.a,{lg:"6"},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Name",type:"text",defaultValue:this.props.value,value:this.props.value,onChange:this.handleValueChange,disabled:!1}),n.a.createElement(we.a,{content:e,title:"Select a Configurable Parameter",trigger:"click"},n.a.createElement(B.a,{color:"secondary",size:"sm"},"Add Configurable Params"))),n.a.createElement(N.a,{lg:"2"},n.a.createElement(B.a,{color:"danger",key:this.props.name,onClick:this.handleDelete,size:"sm"},"Delete"))))}}class je extends n.a.Component{constructor(){super(),this.componentDidMount=()=>{this.props.eventParams&&(this.props.eventParams.headers||this.props.eventParams.body)&&this.setState({overrideChecked:!0})},this.handleOverrideChecked=e=>{this.setState({overrideChecked:e.target.checked}),e.target.checked||this.handleOverrideValuesChange({})},this.handleOverrideValuesChange=e=>{this.props.onChange(e)},this.state={overrideChecked:!1}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Oe.a,{checked:this.state.overrideChecked,onChange:this.handleOverrideChecked},"Override some parameters"))),this.state.overrideChecked?n.a.createElement(F.a,{className:"mt-3"},n.a.createElement(N.a,null,n.a.createElement(Ie,{eventParams:this.props.eventParams,onChange:this.handleOverrideValuesChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,callbackDefinition:this.props.callbackDefinition,callbackRootParameters:this.props.callbackRootParameters,callbackObject:this.props.callbackObject}))):null)}}class Me extends n.a.Component{render(){return"FIXED_CALLBACK"===this.props.eventType||"FIXED_ERROR_CALLBACK"===this.props.eventType?n.a.createElement(Ie,{eventParams:this.props.eventParams,onChange:this.props.onChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,callbackDefinition:this.props.callbackDefinition,callbackRootParameters:this.props.callbackRootParameters,callbackObject:this.props.callbackObject}):"MOCK_CALLBACK"===this.props.eventType||"MOCK_ERROR_CALLBACK"===this.props.eventType?n.a.createElement(je,{eventParams:this.props.eventParams,onChange:this.props.onChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,callbackDefinition:this.props.callbackDefinition,callbackRootParameters:this.props.callbackRootParameters,callbackObject:this.props.callbackObject}):null}}class He extends n.a.Component{constructor(){super(),this.successEventTypes=[{name:"FIXED_CALLBACK",title:"Fixed Callback"},{name:"MOCK_CALLBACK",title:"Mock Callback"}],this.errorEventTypes=[{name:"FIXED_ERROR_CALLBACK",title:"Fixed Error Callback"},{name:"MOCK_ERROR_CALLBACK",title:"Mock Error Callback"}],this.handleEventTypeSelect=e=>{this.props.event.type=e,this.handleEventChange()},this.handleEventChange=()=>{this.props.callbackObject&&(this.props.event.method=this.props.callbackObject.method,this.props.event.path=this.props.callbackObject.path),this.props.onChange(this.props.event)},this.getEventTypes=()=>{let e=this.successEventTypes;return"validation"===this.props.mode&&(e=this.errorEventTypes),e.map(e=>n.a.createElement(Ae,{key:e.name,value:e.name},e.title))},this.handleParamsChange=e=>{e?this.props.event.params=e:delete this.props.event.params,this.handleEventChange()},this.state={selectedResource:null}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(F.a,null,n.a.createElement(N.a,{md:"12"},n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Event Type"),n.a.createElement(te.a,{value:this.props.event.type,onChange:this.handleEventTypeSelect,disabled:!this.props.resource},this.getEventTypes())))),n.a.createElement(Me,{eventType:this.props.event.type,eventParams:this.props.event.params,onChange:this.handleParamsChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,callbackDefinition:this.props.callbackDefinition,callbackRootParameters:this.props.callbackRootParameters,callbackObject:this.props.callbackObject})))}}var ze=He;const _e=new be.a({allErrors:!0}),Le=te.a.Option;class Be extends n.a.Component{constructor(){var e;super(),e=this,this.modes=[],this.inputValue=null,this.getModeMenu=()=>this.modes.map((e,t)=>n.a.createElement(Le,{key:t,value:t},e)),this.handleModeChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=null,n=[],e.props.rootParameters&&(n=n.concat(e.props.rootParameters)),e.props.resourceDefinition.parameters&&(n=n.concat(e.props.resourceDefinition.parameters)),t.t0=a,t.next=0===t.t0?7:1===t.t0?9:2===t.t0?11:4===t.t0?13:15;break;case 7:return s=(new Ee.a).getPathParametersFactData(n),t.abrupt("break",16);case 9:return s=(new Ee.a).getBodyFactData(e.props.resourceDefinition),t.abrupt("break",16);case 11:return s=(new Ee.a).getHeadersFactData(e.props.resourceDefinition,e.props.rootParameters),t.abrupt("break",16);case 13:return s=(new Ee.a).getQueryParametersFactData(n),t.abrupt("break",16);case 15:s=null;case 16:return t.next=18,e.setState({mode:a,factData:s});case 18:e.updateChanges();case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getValueComponent=()=>{switch(this.state.mode){case 0:case 1:case 2:case 4:return n.a.createElement(Ee.b,{key:this.props.name,factData:this.state.factData,onSelect:this.handleFactSelect});case 3:default:return null}},this.handleFactTypeSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=JSON.parse(a),t.next=4,e.setState({selectedFactType:s});case 4:e.props.condition.fact=s.name,e.props.onConditionChange(),e.updateFactData(),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.handleFactSelect=(e,t)=>{this.inputValue=e,this.updateChanges()},this.updateChanges=()=>{let e="";switch(this.inputValue||(this.inputValue=""),this.state.mode){case 0:e="{$request.params."+this.inputValue+"}";break;case 4:e="{$request.query."+this.inputValue+"}";break;case 1:e="{$request.body."+this.inputValue+"}";break;case 2:e="{$request.header."+this.inputValue+"}";break;case 3:e="{$session.negotiatedContentType}";break;default:e=this.inputValue}this.props.onChange(e)},this.handleValueChange=e=>{this.inputValue=e,this.updateChanges()},this.state={mode:null,factData:null},this.modes[0]="Request Path Parameter",this.modes[1]="Request Body Parameter",this.modes[2]="Request Header Parameter",this.modes[3]="Negotiated Content Type",this.modes[4]="Request Query Parameter"}render(){return n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.modes[this.state.mode],onSelect:this.handleModeChange},this.getModeMenu())),n.a.createElement(N.a,null,this.getValueComponent()))}}class Ue extends n.a.Component{constructor(){var e;super(),e=this,this.bodySchema={},this.allHeadersArray=[],this.allHeadersObject={},this.componentDidMount=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.eventParams.statusCode||(e.props.eventParams.statusCode=(new Ee.a).pickSuccessCodeFromResponsesObject(e.props.responses)),e.updateBodyAndHeadersSchemaForResponseCode();case 2:case"end":return t.stop()}}),t)}))),this.componentDidUpdate=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.eventParams.statusCode||(e.props.eventParams.statusCode=(new Ee.a).pickSuccessCodeFromResponsesObject(e.props.responses)),e.updateBodyAndHeadersSchemaForResponseCode();case 2:case"end":return t.stop()}}),t)}))),this.updateBodyAndHeadersSchemaForResponseCode=()=>{this.bodySchema=(new Ee.a).getSelectedResponseBodySchema(this.props.responses,this.props.eventParams.statusCode);const e=(new Ee.a).getSelectedResponseHeaders(this.props.responses,this.props.eventParams.statusCode);let t=[];for(let a in e)t.push(Object(X.a)({name:a},e[a]));this.allHeadersArray=t,this.allHeadersObject=e},this.addHeaderItemsFromDefinition=function(){var t=Object(ee.a)(Y.a.mark((function t(a=!1){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.allHeadersArray.forEach(t=>{a&&!t.required||(e.props.eventParams.headers?e.props.eventParams.headers[t.name]||(e.props.eventParams.headers[t.name]=""):(e.props.eventParams.headers={},e.props.eventParams.headers[t.name]=""))}),e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),this.addHeaderItem=e=>{this.props.eventParams.headers||(this.props.eventParams.headers={}),this.props.eventParams.headers[e]=this.props.eventParams.headers[e]?this.props.eventParams.headers[e]:"",this.updateChanges()},this.handleHeaderItemChange=(e,t,a)=>{this.props.eventParams.headers[t]=a,this.updateChanges()},this.handleHeaderItemDelete=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.props.eventParams.headers[a],e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleBodyChange=e=>{this.props.eventParams.body=e,this.updateChanges()},this.handleAddHeaderClick=e=>{this.addHeaderItem(e.item.props.children)},this.headerItemsMenu=()=>{const e=this.allHeadersArray.map((e,t)=>n.a.createElement(ae.a.Item,{key:t},e.name));return n.a.createElement(ae.a,{onClick:this.handleAddHeaderClick},e)},this.updateChanges=()=>{const e={};e.headers=this.props.eventParams.headers,e.body=this.props.eventParams.body,e.statusCode=this.props.eventParams.statusCode,this.props.onChange(e)},this.getHeaderItems=()=>{let e=[],t=0;if(this.props.eventParams)for(let a in this.props.eventParams.headers){const s={name:a,value:this.props.eventParams.headers[a]},r=t++;e.push(n.a.createElement(Ke,{key:r,itemKey:s.name,name:s.name,value:s.value,description:this.allHeadersObject[s.name]?this.allHeadersObject[s.name].description:null,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition,onChange:this.handleHeaderItemChange,onDelete:this.handleHeaderItemDelete}))}return e},this.handleAddConfigParam=e=>{this.setState({configurableParameterSelected:e})},this.handlePopulateSampleBodyClick=Object(ee.a)(Y.a.mark((function t(){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Ee.a).generateSample(e.bodySchema);case 2:(a=t.sent)&&(e.props.callbackObject&&e.props.callbackObject.bodyOverride&&xe.a.merge(a,e.props.callbackObject.bodyOverride),e.props.eventParams.body=a,e.refs.bodyEditor.jsonEditor.update(e.props.eventParams.body),e.updateChanges());case 4:case"end":return t.stop()}}),t)}))),this.handleConfigParamCopyToClipboard=()=>{navigator.clipboard.writeText(this.state.configurableParameterSelected),ne.a.success("Copied to clipboard")},this.state={configurableParameterSelected:""}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Be,{onChange:this.handleAddConfigParam,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition}))),this.state.configurableParameterSelected?n.a.createElement(F.a,{className:"mt-4 text-center"},n.a.createElement(N.a,null,n.a.createElement(ge.a,{color:"geekblue"},n.a.createElement("a",{onClick:this.handleConfigParamCopyToClipboard},this.state.configurableParameterSelected)))):null);return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,{className:"mt-2"},n.a.createElement(N.a,null,n.a.createElement(Fe.a,{size:"small",title:"Headers"},n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"12"},n.a.createElement(pe.a,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"4"},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Name")),n.a.createElement(N.a,{lg:"4"},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Value"))),this.getHeaderItems()),n.a.createElement(Ne.a,{overlay:this.headerItemsMenu()},n.a.createElement(B.a,{color:"primary",size:"sm",onClick:e=>e.preventDefault()},"Add Header")),n.a.createElement(B.a,{color:"danger",onClick:()=>this.addHeaderItemsFromDefinition(!0),size:"sm"},"Add Required Headers"),n.a.createElement(B.a,{color:"info",onClick:()=>this.addHeaderItemsFromDefinition(!1),size:"sm"},"Add All Headers")))))),n.a.createElement(F.a,{className:"mt-2"},n.a.createElement(N.a,null,n.a.createElement(Fe.a,{size:"small",title:"Body"},n.a.createElement(F.a,{className:"mb-2"},n.a.createElement(N.a,{lg:"6"},n.a.createElement(we.a,{content:e,title:"Select a Configurable Parameter",trigger:"click"},n.a.createElement(B.a,{color:"secondary",size:"sm"},"Add Configurable Params"))),n.a.createElement(N.a,{lg:"6",style:{textAlign:"right"}},n.a.createElement(B.a,{color:"success",size:"sm",onClick:this.handlePopulateSampleBodyClick},"Populate with sample body"))),n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"12"},n.a.createElement(ue.a,{ref:"bodyEditor",value:this.props.eventParams.body?this.props.eventParams.body:{},ace:me.a,ajv:_e,theme:"ace/theme/tomorrow_night_blue",mode:"code",search:!1,statusBar:!1,navigationBar:!1,onChange:this.handleBodyChange,schema:this.bodySchema})))))))}}class Ke extends n.a.Component{constructor(){super(),this.inputValue=null,this.componentDidMount=()=>{this.inputValue=this.props.value},this.componentDidUpdate=()=>{this.inputValue=this.props.value},this.handleNameChange=e=>{this.props.onChange(this.props.itemKey,e.target.value,this.props.value)},this.handleAddConfigParam=e=>{this.inputValue=e,this.props.onChange(this.props.itemKey,this.props.name,this.inputValue)},this.handleValueChange=e=>{this.inputValue=e.target.value,this.props.onChange(this.props.itemKey,this.props.name,this.inputValue)},this.handleDelete=()=>{this.props.onDelete(this.props.itemKey)},this.state={name:"",value:""}}render(){const e=n.a.createElement(Be,{name:this.props.name,value:this.props.value,onChange:this.handleAddConfigParam,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition});return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{lg:"4"},n.a.createElement(de.a,{placement:"topLeft",title:this.props.description},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Name",type:"text",defaultValue:this.props.name,value:this.props.name,onChange:this.handleNameChange,disabled:!1}))),n.a.createElement(N.a,{lg:"6"},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Name",type:"text",defaultValue:this.props.value,value:this.props.value,onChange:this.handleValueChange,disabled:!1}),n.a.createElement(we.a,{content:e,title:"Select a Configurable Parameter",trigger:"click"},n.a.createElement(B.a,{color:"secondary",size:"sm"},"Add Configurable Params"))),n.a.createElement(N.a,{lg:"2"},n.a.createElement(B.a,{color:"danger",key:this.props.name,onClick:this.handleDelete,size:"sm"},"Delete"))))}}class Je extends n.a.Component{constructor(){super(),this.componentDidMount=()=>{this.props.eventParams&&(this.props.eventParams.headers||this.props.eventParams.body)&&this.setState({overrideChecked:!0})},this.handleOverrideChecked=e=>{this.setState({overrideChecked:e.target.checked}),e.target.checked||this.handleOverrideValuesChange({})},this.handleOverrideValuesChange=e=>{this.props.onChange(e)},this.state={overrideChecked:!1}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Oe.a,{checked:this.state.overrideChecked,onChange:this.handleOverrideChecked},"Override some parameters"))),this.state.overrideChecked?n.a.createElement(F.a,{className:"mt-3"},n.a.createElement(N.a,null,n.a.createElement(Ue,{eventParams:this.props.eventParams,onChange:this.handleOverrideValuesChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,responses:this.props.responses,callbackRootParameters:this.props.callbackRootParameters,resourceObject:this.props.resourceObject}))):null)}}class $e extends n.a.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.props.eventParams&&!this.props.eventParams.statusCode&&(this.props.eventParams.statusCode=(new Ee.a).pickSuccessCodeFromResponsesObject(this.props.responses),this.forceUpdate())},this.getResponseItems=()=>{let e=[];for(let t in this.props.responses)if("default"!=t){this.props.responses[t];e.push(n.a.createElement(Le,{key:t,value:t},t))}return e},this.handleResponseSelect=e=>{this.props.eventParams.statusCode=e,this.forceUpdate()}}render(){return"FIXED_RESPONSE"===this.props.eventType||"FIXED_ERROR_RESPONSE"===this.props.eventType?n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(Fe.a,{size:"small",title:"Response Code"},n.a.createElement(F.a,null,n.a.createElement(N.a,{md:"12"},n.a.createElement(pe.a,null,n.a.createElement(te.a,{value:this.props.eventParams.statusCode,onChange:this.handleResponseSelect},this.getResponseItems()))))))),n.a.createElement(F.a,{className:"mt-2"},n.a.createElement(N.a,null,n.a.createElement(Ue,{eventParams:this.props.eventParams,onChange:this.props.onChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,responses:this.props.responses,callbackRootParameters:this.props.callbackRootParameters,resourceObject:this.props.resourceObject})))):"MOCK_RESPONSE"===this.props.eventType||"MOCK_ERROR_RESPONSE"===this.props.eventType?n.a.createElement(Je,{eventParams:this.props.eventParams,onChange:this.props.onChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,responses:this.props.responses,callbackRootParameters:this.props.callbackRootParameters,resourceObject:this.props.resourceObject}):null}}class We extends n.a.Component{constructor(){super(),this.successEventTypes=[{name:"FIXED_RESPONSE",title:"Fixed Response"},{name:"MOCK_RESPONSE",title:"Mock Response"}],this.errorEventTypes=[{name:"FIXED_ERROR_RESPONSE",title:"Fixed Error Response"},{name:"MOCK_ERROR_RESPONSE",title:"Mock Error Response"}],this.handleEventTypeSelect=e=>{this.props.event.type=e,this.handleEventChange()},this.handleEventChange=()=>{this.props.callbackObject&&(this.props.event.method=this.props.callbackObject.method,this.props.event.path=this.props.callbackObject.path),this.props.onChange(this.props.event)},this.getEventTypes=()=>{let e=this.successEventTypes;return"validation"===this.props.mode&&(e=this.errorEventTypes),e.map(e=>n.a.createElement(Le,{key:e.name,value:e.name},e.title))},this.handleParamsChange=e=>{e?this.props.event.params=e:delete this.props.event.params,this.handleEventChange()},this.state={selectedResource:null}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(F.a,null,n.a.createElement(N.a,{md:"12"},n.a.createElement(pe.a,null,n.a.createElement("label",{className:"form-control-label",htmlFor:"input-address"},"Event Type"),n.a.createElement(te.a,{value:this.props.event.type,onChange:this.handleEventTypeSelect,disabled:!this.props.resource},this.getEventTypes())))),n.a.createElement($e,{eventType:this.props.event.type,eventParams:this.props.event.params,onChange:this.handleParamsChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,responses:this.props.responses,callbackRootParameters:this.props.callbackRootParameters,resourceObject:this.props.resourceObject})))}}var Ge=We;const Qe=te.a.Option;class Xe extends n.a.Component{constructor(){super(),this.resourceOptions=[],this.getResourceOptions=()=>{if(this.resourceOptions=[],this.props.openApiDefinition){for(let e in this.props.openApiDefinition.paths)for(let t in this.props.openApiDefinition.paths[e]){let a=JSON.stringify({method:t,path:e});switch(t){case"get":case"post":this.resourceOptions.push(n.a.createElement(Qe,{key:a,value:a},t," ",e))}}}return this.resourceOptions},this.getResourceValue=()=>this.props.value?JSON.stringify(this.props.value):null}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{onChange:e=>{this.props.onSelect(JSON.parse(e))},disabled:!!this.props.value,style:{width:300},placeholder:"Select a resource",value:this.getResourceValue()},this.getResourceOptions()))}}class Ze extends n.a.Component{constructor(){super(),this.apiVersionOptions=[],this.getApiVersionOptions=()=>(this.apiVersionOptions=this.props.apiVersions.map((e,t)=>n.a.createElement(Qe,{key:t,value:JSON.stringify(e)},e.type," ",e.majorVersion,".",e.minorVersion)),this.apiVersionOptions),this.getApiVersionValue=()=>this.props.value?JSON.stringify(this.props.value):null}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{onChange:e=>{this.props.onSelect(JSON.parse(e))},disabled:!!this.props.value,style:{width:300},placeholder:"Select an API",value:this.getApiVersionValue()},this.getApiVersionOptions()))}}class Ye extends n.a.Component{constructor(){var e;super(),e=this,this.componentDidMount=Object(ee.a)(Y.a.mark((function t(){var a,s,n,r,l,i,o,c,p,u;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getApiVersions();case 2:a=t.sent,s=JSON.parse(JSON.stringify(e.props.rule)),n=null;try{r=s.conditions.all.find(e=>"operationPath"===e.fact),l=s.conditions.all.find(e=>"method"===e.fact),r&&l&&(n={method:l.value,path:r.value})}catch(h){}i=[],o=[];try{i=s.conditions.all.filter(e=>"method"===e.fact||"operationPath"===e.fact),o=s.conditions.all.filter(e=>"method"!==e.fact&&"operationPath"!==e.fact)}catch(h){}if(c={method:null,path:null,params:{},delay:0},s.event&&(c=s.event),p="",s.description&&(p=s.description),u=null,!s.apiVersion){t.next=18;break}return u=s.apiVersion,t.next=18,e.fetchAllApiData(s.apiVersion.type,s.apiVersion.majorVersion+"."+s.apiVersion.minorVersion);case 18:e.setState({description:p,conditions:o,pathMethodConditions:i,event:c,selectedResource:n,apiVersions:a,selectedApiVersion:u});case 19:case"end":return t.stop()}}),t)}))),this.fetchAllApiData=function(){var t=Object(ee.a)(Y.a.mark((function t(a,s){var n,r,l;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDefinition(a,s);case 2:return n=t.sent,r={},t.prev=4,t.next=7,e.getCallbackMap(a,s);case 7:r=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:return l={},t.prev=13,t.next=16,e.getResponseMap(a,s);case 16:l=t.sent,t.next=21;break;case 19:t.prev=19,t.t1=t.catch(13);case 21:e.setState({openApiDefinition:n,callbackMap:r,responseMap:l});case 22:case"end":return t.stop()}}),t,null,[[4,10],[13,19]])})));return function(e,a){return t.apply(this,arguments)}}(),this.getConditions=()=>this.state.conditions,this.getPathMethodConditions=()=>this.state.pathMethodConditions,this.getEvent=()=>this.state.event,this.getRule=()=>{const e={description:this.state.description?this.state.description:this.state.selectedResource.method+" "+this.state.selectedResource.path,apiVersion:this.state.selectedApiVersion,conditions:{all:[...this.state.conditions,...this.state.pathMethodConditions]},event:this.state.event};return JSON.stringify(e,null,2)},this.handleConditionsChange=()=>{this.forceUpdate()},this.handleEventChange=e=>{this.setState({event:e})},this.getApiVersions=Object(ee.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/api_versions");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getDefinition=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/definition/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getResponseMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/response_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getCallbackMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/callback_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.handleSave=()=>{this.props.onSave(JSON.parse(this.getRule()))},this.apiVersionSelectHandler=e=>{this.fetchAllApiData(e.type,e.majorVersion+"."+e.minorVersion),this.setState({selectedApiVersion:e})},this.resourceSelectHandler=e=>{this.state.pathMethodConditions=[],this.state.pathMethodConditions.push({fact:"operationPath",operator:"equal",value:e.path}),this.state.pathMethodConditions.push({fact:"method",operator:"equal",value:e.method}),this.setState({selectedResource:e})},this.getResourceDefinition=()=>this.state.selectedResource&&this.state.openApiDefinition?this.state.openApiDefinition.paths[this.state.selectedResource.path][this.state.selectedResource.method]:null,this.getRootParameters=()=>{var e=[];return this.state.selectedResource&&this.state.openApiDefinition&&(e=this.state.openApiDefinition.paths[this.state.selectedResource.path].parameters),e},this.getCallbackObject=()=>{let e=null;try{e="validation"===this.props.mode?this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].errorCallback:this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].successCallback}catch(t){}return e},this.getCallbackRootParameters=()=>{try{const e=this.getCallbackObject();return this.state.openApiDefinition.paths[e.path].parameters}catch(e){return[]}},this.getCallbackDefinition=()=>{if(this.state.selectedResource)try{const e=this.getCallbackObject();return this.state.openApiDefinition.paths[e.path][e.method]}catch(e){return null}return null},this.getResponseObject=()=>{let e=null;try{e=this.state.responseMap[this.state.selectedResource.path][this.state.selectedResource.method].response}catch(t){}return e},this.getResponses=()=>{if(this.state.selectedResource)try{this.getResponseObject();return this.state.openApiDefinition.paths[this.state.selectedResource.path][this.state.selectedResource.method].responses}catch(e){return null}return null},this.handleDescriptionChange=e=>{this.setState({description:e})},this.state={origJson:[],curJson:{},description:"",event:{},conditions:[],pathMethodConditions:[],apiVersions:[],openApiDefinition:null,selectedResource:null,selectedApiVersion:null,callbackMap:{},responseMap:{}}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"order-xl-1",xl:"12"},n.a.createElement(z.a,{className:"bg-secondary shadow"},n.a.createElement(_.a,{className:"bg-white border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement(N.a,{xs:"2"},n.a.createElement("h3",{className:"mb-0"},"Rule #",this.props.rule.ruleId)),n.a.createElement(N.a,{xs:"6",className:"text-center"},n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{align:"right"},n.a.createElement("b",null,"API:")),n.a.createElement("td",null,n.a.createElement(Ze,{value:this.state.selectedApiVersion,apiVersions:this.state.apiVersions,onSelect:this.apiVersionSelectHandler}))),n.a.createElement("tr",null,n.a.createElement("td",{align:"right"},n.a.createElement("b",null,"Resource:")),n.a.createElement("td",null,n.a.createElement(Xe,{value:this.state.selectedResource,openApiDefinition:this.state.openApiDefinition,onSelect:this.resourceSelectHandler})))))),n.a.createElement(N.a,{xs:"4"},n.a.createElement(F.a,{className:"text-right float-right"},n.a.createElement(N.a,null,n.a.createElement(B.a,{color:"danger",href:"#pablo",onClick:e=>e.preventDefault(),size:"sm"},"Reset")),n.a.createElement(N.a,null,n.a.createElement(B.a,{className:"float-right",color:"primary",href:"#pablo",onClick:this.handleSave,size:"sm"},"Save")))))),n.a.createElement(L.a,null,n.a.createElement(w.a,null,n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Conditions"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(De,{conditions:this.getConditions(),pathMethodConditions:this.getPathMethodConditions(),onChange:this.handleConditionsChange,openApiDefinition:this.state.openApiDefinition,resource:this.state.selectedResource,resourceDefinition:this.getResourceDefinition(),rootParameters:this.getRootParameters()})),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Event"),"response"===this.props.mode?n.a.createElement(Ge,{event:this.getEvent(),onChange:this.handleEventChange,resource:this.state.selectedResource,resourceDefinition:this.getResourceDefinition(),rootParameters:this.getRootParameters(),responses:this.getResponses(),callbackRootParameters:this.getCallbackRootParameters(),responseObject:this.getResponseObject(),mode:this.props.mode}):n.a.createElement(ze,{event:this.getEvent(),onChange:this.handleEventChange,resource:this.state.selectedResource,resourceDefinition:this.getResourceDefinition(),rootParameters:this.getRootParameters(),callbackDefinition:this.getCallbackDefinition(),callbackRootParameters:this.getCallbackRootParameters(),callbackObject:this.getCallbackObject(),mode:this.props.mode}),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("h6",{className:"heading-small text-muted mb-4"},"Rule Details"),n.a.createElement("div",{className:"pl-lg-4"},n.a.createElement(pe.a,null,n.a.createElement("label",null,"Rule Description"),n.a.createElement(V.a,{className:"form-control-alternative",placeholder:"A few words about the rule ...",onChange:e=>this.handleDescriptionChange(e.target.value),rows:"4",value:this.state.description,type:"textarea"})))))))))}}var et=Ye;class tt extends n.a.Component{render(){const e=this.props.rule;let t={},a=[];try{const s=e.conditions.all.find(e=>"operationPath"===e.fact);s&&(t.path=s.value);const n=e.conditions.all.find(e=>"method"===e.fact);n&&(t.method=n.value),a=e.conditions.all.filter(e=>"method"!==e.fact&&"operationPath"!==e.fact)}catch(r){}const s=a.map(e=>n.a.createElement(n.a.Fragment,null,n.a.createElement(Fe.a,{size:"small",className:"mt-1"},n.a.createElement(ge.a,{color:"cyan"},e.fact,".",e.path),n.a.createElement(ge.a,null,e.operator),n.a.createElement(ge.a,{color:"blue"},e.value))));return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{width:"100%",cellPadding:"5px"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"align-text-top",width:"25px"},n.a.createElement(re.a,{type:"double-right",style:{fontSize:"20px",color:"#08c"}})),n.a.createElement("td",null,n.a.createElement("h3",null,t.method.toUpperCase()+" "+t.path))),a.length>0?n.a.createElement("tr",null,n.a.createElement("td",{className:"align-text-top"},n.a.createElement(re.a,{type:"question",style:{fontSize:"20px",color:"#08c"}})),n.a.createElement("td",null,n.a.createElement("h3",null,"Conditions"),s)):null,n.a.createElement("tr",null,n.a.createElement("td",{className:"align-text-top"},n.a.createElement(re.a,{type:"double-left",style:{fontSize:"20px",color:"#08c"}})),n.a.createElement("td",null,n.a.createElement("h3",null,"Event"),Object.entries(e.event.params).length>0?n.a.createElement(Fe.a,{size:"small",className:"mt-4",title:e.event.type},n.a.createElement("pre",null,JSON.stringify(e.event.params,null,2))):e.event.type)))))}}var at=tt;const st=new class{fetchResponseRulesFiles(){return Object(ee.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/rules/files/response");case 2:if("object"!==typeof(t=e.sent).data){e.next=5;break}return e.abrupt("return",t.data);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))()}fetchResponseRulesFileContent(e){return Object(ee.a)(Y.a.mark((function t(){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.a.get("http://localhost:5050/api/rules/files/response/"+e);case 2:return a=t.sent,s=[],a.data&&Array.isArray(a.data)&&(s=a.data),t.abrupt("return",s);case 6:case"end":return t.stop()}}),t)})))()}updateResponseRulesFileContent(e,t){return Object(ee.a)(Y.a.mark((function a(){return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ce.a.put("http://localhost:5050/api/rules/files/response/"+e,t,{headers:{"Content-Type":"application/json"}});case 2:return a.abrupt("return",!0);case 3:case"end":return a.stop()}}),a)})))()}},nt=(te.a.Option,ae.a.SubMenu,se.a.Panel);class rt extends n.a.Component{constructor(){var e;super(),e=this,this.getResponseRulesFiles=Object(ee.a)(Y.a.mark((function t(){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Getting rules files...",key:"getFilesProgress"}),t.next=3,st.fetchResponseRulesFiles();case 3:if(!(a=t.sent)){t.next=11;break}return s=a.activeRulesFile,t.next=8,e.setState({responseRulesFiles:a.files,activeRulesFile:s});case 8:return ne.a.success({content:"Loaded",key:"getFilesProgress",duration:-1}),t.next=11,e.setState({selectedRuleFile:s,ruleItemActive:null});case 11:e.updateRulesFileDisplay();case 12:case"end":return t.stop()}}),t)}))),this.getResponseRulesFileContent=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.fetchResponseRulesFileContent(a);case 2:return s=t.sent,t.next=5,e.setState({curRules:s});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getRulesFilesItems=()=>this.state.responseRulesFiles.map(e=>{const t=e===this.state.activeRulesFile;return n.a.createElement(ae.a.Item,{key:e},t?n.a.createElement(re.a,{type:"check"}):""," ",e)}),this.handleRuleFileSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.key,t.next=3,e.setState({selectedRuleFile:s,ruleItemActive:null});case 3:e.updateRulesFileDisplay();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateRulesFileDisplay=()=>{this.getResponseRulesFileContent(this.state.selectedRuleFile)},this.getRulesFileContentItems=()=>this.state.curRules.map((e,t)=>n.a.createElement(nt,{header:e.description,key:t},n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"right"}},n.a.createElement(B.a,{color:"info",onClick:this.handleRuleClick(e),size:"sm"},"Edit"),n.a.createElement(B.a,{color:"danger",onClick:this.handleRuleDelete(e.ruleId),size:"sm"},"Delete"))),n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(at,{rule:e}))))),this.handleRuleClick=(e={})=>()=>{this.setState({editRule:e,mode:"edit"})},this.handleAddNewRuleClick=()=>{const e=this.state.curRules.reduce((e,t)=>e.ruleId>t.ruleId?e:t,this.state.curRules[0]);let t=1;e&&(t=e.ruleId+1);const a={ruleId:t,priority:1};this.setState({editRule:a,mode:"create"})},this.handleRuleCancelClick=()=>{this.setState({editRule:null})},this.handleRuleSave=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object(X.a)({ruleId:e.state.editRule.ruleId,priority:e.state.editRule.priority},a),n=null,"create"==e.state.mode?n=e.state.curRules.concat(s):"edit"==e.state.mode&&(n=e.state.curRules.map(e=>e.ruleId===s.ruleId?s:e)),!n){t.next=9;break}return ne.a.loading({content:"Saving the rule...",key:"ruleSaveProgress"}),t.next=7,ce.a.put("http://localhost:5050/api/rules/files/response/"+e.state.selectedRuleFile,n,{headers:{"Content-Type":"application/json"}});case 7:e.setState({editRule:null,curRules:n}),ne.a.success({content:"Saved",key:"ruleSaveProgress",duration:2});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleDelete=t=>Object(ee.a)(Y.a.mark((function a(){var s;return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(s=e.state.curRules.filter(e=>e.ruleId!==t))&&(ne.a.loading({content:"Deleting rule...",key:"deleteProgress"}),st.updateResponseRulesFileContent(e.state.selectedRuleFile,s),ne.a.success({content:"Deleted",key:"deleteProgress",duration:2}),e.setState({editRule:null,curRules:s}));case 2:case"end":return a.stop()}}),a)}))),this.handleNewRulesFileClick=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Creating new file...",key:"fileNewProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/response/"+a);case 3:return t.next=5,e.getResponseRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:a,ruleItemActive:null});case 7:ne.a.success({content:"Created",key:"fileNewProgress",duration:2}),e.updateRulesFileDisplay();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleFileDelete=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Deleting file...",key:"deleteFileProgress"}),t.next=3,ce.a.delete("http://localhost:5050/api/rules/files/response/"+e.state.selectedRuleFile);case 3:return t.next=5,e.getResponseRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:null,ruleItemActive:null});case 7:ne.a.success({content:"Deleted",key:"deleteFileProgress",duration:2});case 8:case"end":return t.stop()}}),t)}))),this.handleRuleFileSetActive=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Activating rule file...",key:"activateFileProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/response",{type:"activeRulesFile",fileName:e.state.selectedRuleFile},{headers:{"Content-Type":"application/json"}});case 3:return t.next=5,e.getResponseRulesFiles();case 5:e.updateRulesFileDisplay(),ne.a.success({content:"Activated",key:"activateFileProgress",duration:2});case 7:case"end":return t.stop()}}),t)}))),this.state={responseRulesFiles:[],activeRulesFile:null,selectedRuleFile:null,curRules:[],editRule:null,mode:null}}componentDidMount(){this.getResponseRulesFiles()}render(){var e="";return n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Rule Builder",className:"w-50 p-3",visible:!!this.state.editRule,footer:null,onCancel:this.handleRuleCancelClick},n.a.createElement(et,{rule:this.state.editRule,onSave:this.handleRuleSave,mode:"response"})),n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"order-xl-2 mb-5 mb-xl-0",xl:"4"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"},n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(B.a,{className:"mr-4",color:"info",onClick:()=>{this.setState({mode:"newFile"})},size:"sm"},"New Rules File"),this.state.selectedRuleFile?n.a.createElement(B.a,{color:"success",onClick:this.handleRuleFileSetActive,size:"sm"},"Set as active"):null,this.state.selectedRuleFile?n.a.createElement(B.a,{className:"float-right",color:"danger",onClick:this.handleRuleFileDelete,size:"sm"},"Delete"):null),"newFile"===this.state.mode?n.a.createElement("table",{className:"mt-2"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(ie.a,{placeholder:"File Name",type:"text",onChange:t=>{e=t.target.value}})),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{e.endsWith(".json")?/\s/.test(e)?ne.a.error("Filename contains spaces"):(this.setState({mode:null}),this.handleNewRulesFileClick(e)):ne.a.error("Filename should be ended with .json")},size:"sm"},n.a.createElement(re.a,{type:"check"}))),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{this.setState({mode:null})},size:"sm"},n.a.createElement(re.a,{type:"close"})))))):null),n.a.createElement(L.a,{className:"pt-0 pt-md-4"},n.a.createElement(ae.a,{mode:"inline",theme:"light",selectedKeys:[this.state.selectedRuleFile],onSelect:this.handleRuleFileSelect},this.getRulesFilesItems())))),n.a.createElement(N.a,{className:"order-xl-1",xl:"8"},this.state.selectedRuleFile?n.a.createElement(z.a,{className:"bg-secondary shadow"},n.a.createElement(_.a,{className:"bg-white border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement(N.a,{xs:"6"},n.a.createElement("h3",{className:"mb-0"},this.state.selectedRuleFile)),n.a.createElement(N.a,{className:"text-right",xs:"6"},n.a.createElement(B.a,{color:"info",href:"#pablo",onClick:this.handleAddNewRuleClick,size:"sm"},"Add a new Rule")))),n.a.createElement(L.a,null,n.a.createElement(se.a,{onChange:this.handleRuleItemActivePanelChange},this.getRulesFileContentItems()))):n.a.createElement(z.a,{className:"bg-secondary shadow",style:{minHeight:"300px"}},n.a.createElement(_.a,{className:"bg-white border-0"}),n.a.createElement(L.a,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"center"}},n.a.createElement("p",null,"Please select a file")))))))))}}var lt=rt;te.a.Option,ae.a.SubMenu;const it=se.a.Panel;class ot extends n.a.Component{constructor(){var e;super(),e=this,this.getValidationRulesFiles=Object(ee.a)(Y.a.mark((function t(){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Getting rules files...",key:"getFilesProgress"}),t.next=3,ce.a.get("http://localhost:5050/api/rules/files/validation");case 3:return a=t.sent,s=a.data.activeRulesFile,t.next=7,e.setState({validationRulesFiles:a.data.files,activeRulesFile:s});case 7:return ne.a.success({content:"Loaded",key:"getFilesProgress",duration:-1}),t.next=10,e.setState({selectedRuleFile:s,ruleItemActive:null});case 10:e.updateRulesFileDisplay();case 11:case"end":return t.stop()}}),t)}))),this.getValidationRulesFileContent=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.a.get("http://localhost:5050/api/rules/files/validation/"+a);case 2:s=t.sent,n=[],s.data&&Array.isArray(s.data)&&(n=s.data),e.setState({curRules:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getRulesFilesItems=()=>this.state.validationRulesFiles.map(e=>{const t=e===this.state.activeRulesFile;return n.a.createElement(ae.a.Item,{key:e},t?n.a.createElement(re.a,{type:"check"}):""," ",e)}),this.handleRuleFileSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.key,t.next=3,e.setState({selectedRuleFile:s,ruleItemActive:null});case 3:e.updateRulesFileDisplay();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateRulesFileDisplay=()=>{this.getValidationRulesFileContent(this.state.selectedRuleFile)},this.getRulesFileContentItems=()=>this.state.curRules.map((e,t)=>n.a.createElement(it,{header:e.description,key:t},n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"right"}},n.a.createElement(B.a,{color:"info",onClick:this.handleRuleClick(e),size:"sm"},"Edit"),n.a.createElement(B.a,{color:"danger",onClick:this.handleRuleDelete(e.ruleId),size:"sm"},"Delete"))),n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(at,{rule:e}))))),this.handleRuleClick=(e={})=>()=>{this.setState({editRule:e,mode:"edit"})},this.handleAddNewRuleClick=()=>{const e=this.state.curRules.reduce((e,t)=>e.ruleId>t.ruleId?e:t,this.state.curRules[0]);let t=1;e&&(t=e.ruleId+1);const a={ruleId:t,priority:1};this.setState({editRule:a,mode:"create"})},this.handleRuleCancelClick=()=>{this.setState({editRule:null})},this.handleRuleSave=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object(X.a)({ruleId:e.state.editRule.ruleId,priority:e.state.editRule.priority},a),n=null,"create"==e.state.mode?n=e.state.curRules.concat(s):"edit"==e.state.mode&&(n=e.state.curRules.map(e=>e.ruleId===s.ruleId?s:e)),!n){t.next=10;break}return ne.a.loading({content:"Saving the rule...",key:"ruleSaveProgress"}),t.next=7,ce.a.put("http://localhost:5050/api/rules/files/validation/"+e.state.selectedRuleFile,n,{headers:{"Content-Type":"application/json"}});case 7:return t.next=9,e.setState({editRule:null,curRules:n});case 9:ne.a.success({content:"Saved",key:"ruleSaveProgress",duration:2});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleDelete=t=>Object(ee.a)(Y.a.mark((function a(){var s;return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(s=e.state.curRules.filter(e=>e.ruleId!==t))){a.next=7;break}return ne.a.loading({content:"Deleting rule...",key:"deleteProgress"}),a.next=5,ce.a.put("http://localhost:5050/api/rules/files/validation/"+e.state.selectedRuleFile,s,{headers:{"Content-Type":"application/json"}});case 5:ne.a.success({content:"Deleted",key:"deleteProgress",duration:2}),e.setState({editRule:null,curRules:s});case 7:case"end":return a.stop()}}),a)}))),this.handleNewRulesFileClick=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Creating new file...",key:"fileNewProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/validation/"+a);case 3:return t.next=5,e.getValidationRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:a,ruleItemActive:null});case 7:ne.a.success({content:"Created",key:"fileNewProgress",duration:2}),e.updateRulesFileDisplay();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleFileDelete=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Deleting file...",key:"deleteFileProgress"}),t.next=3,ce.a.delete("http://localhost:5050/api/rules/files/validation/"+e.state.selectedRuleFile);case 3:return t.next=5,e.getValidationRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:null,ruleItemActive:null});case 7:ne.a.success({content:"Deleted",key:"deleteFileProgress",duration:2});case 8:case"end":return t.stop()}}),t)}))),this.handleRuleFileSetActive=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Activating rule file...",key:"activateFileProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/validation",{type:"activeRulesFile",fileName:e.state.selectedRuleFile},{headers:{"Content-Type":"application/json"}});case 3:return t.next=5,e.getValidationRulesFiles();case 5:e.updateRulesFileDisplay(),ne.a.success({content:"Activated",key:"activateFileProgress",duration:2});case 7:case"end":return t.stop()}}),t)}))),this.state={validationRulesFiles:[],activeRulesFile:null,selectedRuleFile:null,curRules:[],editRule:null,mode:null}}componentDidMount(){this.getValidationRulesFiles()}render(){var e="";return n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Rule Builder",className:"w-50 p-3",visible:!!this.state.editRule,footer:null,onCancel:this.handleRuleCancelClick},n.a.createElement(et,{rule:this.state.editRule,onSave:this.handleRuleSave,mode:"validation"})),n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"order-xl-2 mb-5 mb-xl-0",xl:"4"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"},n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(B.a,{className:"mr-4",color:"info",onClick:()=>{this.setState({mode:"newFile"})},size:"sm"},"New Rules File"),this.state.selectedRuleFile?n.a.createElement(B.a,{color:"success",onClick:this.handleRuleFileSetActive,size:"sm"},"Set as active"):null,this.state.selectedRuleFile?n.a.createElement(B.a,{className:"float-right",color:"danger",onClick:this.handleRuleFileDelete,size:"sm"},"Delete"):null),"newFile"===this.state.mode?n.a.createElement("table",{className:"mt-2"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(ie.a,{placeholder:"File Name",type:"text",onChange:t=>{e=t.target.value}})),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{e.endsWith(".json")?/\s/.test(e)?ne.a.error("Filename contains spaces"):(this.setState({mode:null}),this.handleNewRulesFileClick(e)):ne.a.error("Filename should be ended with .json")},size:"sm"},n.a.createElement(re.a,{type:"check"}))),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{this.setState({mode:null})},size:"sm"},n.a.createElement(re.a,{type:"close"})))))):null),n.a.createElement(L.a,{className:"pt-0 pt-md-4"},n.a.createElement(ae.a,{mode:"inline",theme:"light",selectedKeys:[this.state.selectedRuleFile],onSelect:this.handleRuleFileSelect},this.getRulesFilesItems())))),n.a.createElement(N.a,{className:"order-xl-1",xl:"8"},this.state.selectedRuleFile?n.a.createElement(z.a,{className:"bg-secondary shadow"},n.a.createElement(_.a,{className:"bg-white border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement(N.a,{xs:"6"},n.a.createElement("h3",{className:"mb-0"},this.state.selectedRuleFile)),n.a.createElement(N.a,{className:"text-right",xs:"6"},n.a.createElement(B.a,{color:"info",href:"#pablo",onClick:this.handleAddNewRuleClick,size:"sm"},"Add a new Rule")))),n.a.createElement(L.a,null,n.a.createElement(se.a,{onChange:this.handleRuleItemActivePanelChange},this.getRulesFileContentItems()))):n.a.createElement(z.a,{className:"bg-secondary shadow",style:{minHeight:"300px"}},n.a.createElement(_.a,{className:"bg-white border-0"}),n.a.createElement(L.a,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"center"}},n.a.createElement("p",null,"Please select a file")))))))))}}var ct=ot;te.a.Option,ae.a.SubMenu;const pt=se.a.Panel;class ut extends n.a.Component{constructor(){var e;super(),e=this,this.getCallbackRulesFiles=Object(ee.a)(Y.a.mark((function t(){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Getting rules files...",key:"getFilesProgress"}),t.next=3,ce.a.get("http://localhost:5050/api/rules/files/callback");case 3:return a=t.sent,s=a.data.activeRulesFile,t.next=7,e.setState({callbackRulesFiles:a.data.files,activeRulesFile:s});case 7:return ne.a.success({content:"Loaded",key:"getFilesProgress",duration:-1}),t.next=10,e.setState({selectedRuleFile:s,ruleItemActive:null});case 10:e.updateRulesFileDisplay();case 11:case"end":return t.stop()}}),t)}))),this.getCallbackRulesFileContent=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.a.get("http://localhost:5050/api/rules/files/callback/"+a);case 2:s=t.sent,n=[],s.data&&Array.isArray(s.data)&&(n=s.data),e.setState({curRules:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getRulesFilesItems=()=>this.state.callbackRulesFiles.map(e=>{const t=e===this.state.activeRulesFile;return n.a.createElement(ae.a.Item,{key:e},t?n.a.createElement(re.a,{type:"check"}):""," ",e)}),this.handleRuleFileSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.key,t.next=3,e.setState({selectedRuleFile:s,ruleItemActive:null});case 3:e.updateRulesFileDisplay();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateRulesFileDisplay=()=>{this.getCallbackRulesFileContent(this.state.selectedRuleFile)},this.getRulesFileContentItems=()=>this.state.curRules.map((e,t)=>n.a.createElement(pt,{header:e.description,key:t},n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"right"}},n.a.createElement(B.a,{color:"info",onClick:this.handleRuleClick(e),size:"sm"},"Edit"),n.a.createElement(B.a,{color:"danger",onClick:this.handleRuleDelete(e.ruleId),size:"sm"},"Delete"))),n.a.createElement(F.a,null,n.a.createElement(N.a,null,n.a.createElement(at,{rule:e}))))),this.handleRuleClick=(e={})=>()=>{this.setState({editRule:e,mode:"edit"})},this.handleAddNewRuleClick=()=>{const e=this.state.curRules.reduce((e,t)=>e.ruleId>t.ruleId?e:t,this.state.curRules[0]);let t=1;e&&(t=e.ruleId+1);const a={ruleId:t,priority:1};this.setState({editRule:a,mode:"create"})},this.handleRuleCancelClick=()=>{this.setState({editRule:null})},this.handleRuleSave=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object(X.a)({ruleId:e.state.editRule.ruleId,priority:e.state.editRule.priority},a),n=null,"create"==e.state.mode?n=e.state.curRules.concat(s):"edit"==e.state.mode&&(n=e.state.curRules.map(e=>e.ruleId===s.ruleId?s:e)),!n){t.next=9;break}return ne.a.loading({content:"Saving the rule...",key:"ruleSaveProgress"}),t.next=7,ce.a.put("http://localhost:5050/api/rules/files/callback/"+e.state.selectedRuleFile,n,{headers:{"Content-Type":"application/json"}});case 7:e.setState({editRule:null,curRules:n}),ne.a.success({content:"Saved",key:"ruleSaveProgress",duration:2});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleDelete=t=>Object(ee.a)(Y.a.mark((function a(){var s;return Y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(s=e.state.curRules.filter(e=>e.ruleId!==t))){a.next=7;break}return ne.a.loading({content:"Deleting rule...",key:"deleteProgress"}),a.next=5,ce.a.put("http://localhost:5050/api/rules/files/callback/"+e.state.selectedRuleFile,s,{headers:{"Content-Type":"application/json"}});case 5:ne.a.success({content:"Deleted",key:"deleteProgress",duration:2}),e.setState({editRule:null,curRules:s});case 7:case"end":return a.stop()}}),a)}))),this.handleNewRulesFileClick=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Creating new file...",key:"fileNewProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/callback/"+a);case 3:return t.next=5,e.getCallbackRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:a,ruleItemActive:null});case 7:ne.a.success({content:"Created",key:"fileNewProgress",duration:2}),e.updateRulesFileDisplay();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleRuleFileDelete=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Deleting file...",key:"deleteFileProgress"}),t.next=3,ce.a.delete("http://localhost:5050/api/rules/files/callback/"+e.state.selectedRuleFile);case 3:return t.next=5,e.getCallbackRulesFiles();case 5:return t.next=7,e.setState({selectedRuleFile:null,ruleItemActive:null});case 7:ne.a.success({content:"Deleted",key:"deleteFileProgress",duration:2});case 8:case"end":return t.stop()}}),t)}))),this.handleRuleFileSetActive=Object(ee.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Activating rule file...",key:"activateFileProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/rules/files/callback",{type:"activeRulesFile",fileName:e.state.selectedRuleFile},{headers:{"Content-Type":"application/json"}});case 3:return t.next=5,e.getCallbackRulesFiles();case 5:e.updateRulesFileDisplay(),ne.a.success({content:"Activated",key:"activateFileProgress",duration:2});case 7:case"end":return t.stop()}}),t)}))),this.state={callbackRulesFiles:[],activeRulesFile:null,selectedRuleFile:null,curRules:[],editRule:null,mode:null}}componentDidMount(){this.getCallbackRulesFiles()}render(){var e="";return n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Rule Builder",className:"w-50 p-3",visible:!!this.state.editRule,footer:null,onCancel:this.handleRuleCancelClick},n.a.createElement(et,{rule:this.state.editRule,onSave:this.handleRuleSave,mode:"callback"})),n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"order-xl-2 mb-5 mb-xl-0",xl:"4"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,{className:"text-center border-0 pt-8 pt-md-4 pb-0 pb-md-4"},n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement(B.a,{className:"mr-4",color:"info",onClick:()=>{this.setState({mode:"newFile"})},size:"sm"},"New Rules File"),this.state.selectedRuleFile?n.a.createElement(B.a,{color:"success",onClick:this.handleRuleFileSetActive,size:"sm"},"Set as active"):null,this.state.selectedRuleFile?n.a.createElement(B.a,{className:"float-right",color:"danger",onClick:this.handleRuleFileDelete,size:"sm"},"Delete"):null),"newFile"===this.state.mode?n.a.createElement("table",{className:"mt-2"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement(ie.a,{placeholder:"File Name",type:"text",onChange:t=>{e=t.target.value}})),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{e.endsWith(".json")?/\s/.test(e)?ne.a.error("Filename contains spaces"):(this.setState({mode:null}),this.handleNewRulesFileClick(e)):ne.a.error("Filename should be ended with .json")},size:"sm"},n.a.createElement(re.a,{type:"check"}))),n.a.createElement("td",null,n.a.createElement(B.a,{className:"float-right",color:"secondary",onClick:()=>{this.setState({mode:null})},size:"sm"},n.a.createElement(re.a,{type:"close"})))))):null),n.a.createElement(L.a,{className:"pt-0 pt-md-4"},n.a.createElement(ae.a,{mode:"inline",theme:"light",selectedKeys:[this.state.selectedRuleFile],onSelect:this.handleRuleFileSelect},this.getRulesFilesItems())))),n.a.createElement(N.a,{className:"order-xl-1",xl:"8"},this.state.selectedRuleFile?n.a.createElement(z.a,{className:"bg-secondary shadow"},n.a.createElement(_.a,{className:"bg-white border-0"},n.a.createElement(F.a,{className:"align-items-center"},n.a.createElement(N.a,{xs:"6"},n.a.createElement("h3",{className:"mb-0"},this.state.selectedRuleFile)),n.a.createElement(N.a,{className:"text-right",xs:"6"},n.a.createElement(B.a,{color:"info",href:"#pablo",onClick:this.handleAddNewRuleClick,size:"sm"},"Add a new Rule")))),n.a.createElement(L.a,null,n.a.createElement(se.a,{onChange:this.handleRuleItemActivePanelChange},this.getRulesFileContentItems()))):n.a.createElement(z.a,{className:"bg-secondary shadow",style:{minHeight:"300px"}},n.a.createElement(_.a,{className:"bg-white border-0"}),n.a.createElement(L.a,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{xs:"12",style:{textAlign:"center"}},n.a.createElement("p",null,"Please select a file")))))))))}}var ht=ut,mt=a(161),dt=a(128),gt=a.n(dt),Et=a(740),ft=a(107),bt=a(52),Ct=a(731),vt=a(721),yt=a(728),kt=a(199),Rt=a(729),Pt=a(736);a(672);const Dt=new be.a({allErrors:!0}),St=te.a.Option;class xt extends n.a.Component{constructor(){var e;super(),e=this,this.paramTypes=[],this.inputValue=null,this.getParamTypeMenu=()=>this.paramTypes.map((e,t)=>n.a.createElement(St,{key:t,value:t},e)),this.handleParamTypeChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({paramType:a,factData:null,selectedValueComponent:null});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getRequestFactComponent=()=>this.state.factData?n.a.createElement(Ee.b,{key:this.props.name,factData:this.state.factData,onSelect:this.handleFactSelect}):null,this.getValueComponent=()=>{switch(this.state.paramType){case 0:let e=[];for(let r in this.props.inputValues)e.push(n.a.createElement(St,{key:r,value:r},r));return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.state.selectedValueComponent,onChange:e=>{this.state.selectedValueComponent=e,this.handleParamSelect("{$inputs."+e+"}")}},e));case 1:case 2:let t=[];return t=this.props.allRequests.map(e=>n.a.createElement(St,{key:e.id,value:e.id},e.description)),n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.state.selectedValueComponent,onChange:e=>{const t=this.props.allRequests.find(t=>t.id===e);let a=null,s=null;if(1===this.state.paramType)a=this.props.openApiDefinition.paths[t.operationPath][t.method],s=this.props.openApiDefinition.paths[t.operationPath].parameters;else{const e=this.props.callbackMap[t.operationPath][t.method].successCallback;a=this.props.openApiDefinition.paths[e.path][e.method],s=this.props.openApiDefinition.paths[e.path].parameters}const n=(new Ee.a).getBodyFactData(a),r=(new Ee.a).getHeadersFactData(a,s),l={properties:{body:n,headers:Object(X.a)({type:"object"},r)}};this.setState({selectedValueComponent:e,factData:l})}},t));case 3:let a={generateUUID:{description:"Generates unique id"},curDate:{description:"Get current date and time"}},s=[];for(let r in a)s.push(n.a.createElement(St,{key:r,value:r},r));return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.state.selectedValueComponent,onChange:e=>{this.state.selectedValueComponent=e,this.handleParamSelect("{$function.generic."+e+"}")}},s));default:return null}},this.handleParamSelect=e=>{this.props.onChange(e)},this.handleFactTypeSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=JSON.parse(a),t.next=4,e.setState({selectedFactType:s});case 4:e.props.condition.fact=s.name,e.props.onConditionChange(),e.updateFactData(),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),this.handleFactSelect=(e,t)=>{this.inputValue=e,this.handleParamSelect("{$prev."+this.state.selectedValueComponent+"."+(1===this.state.paramType?"request":"response")+"."+e+"}")},this.updateChanges=()=>{let e="";switch(this.inputValue||(this.inputValue=""),this.state.paramType){case 0:e="{$request.params."+this.inputValue+"}";break;case 1:e="{$request.body."+this.inputValue+"}";break;case 2:e="{$request.header."+this.inputValue+"}";break;case 3:e="{$session.negotiatedContentType}";break;default:e=this.inputValue}this.props.onChange(e)},this.handleValueChange=e=>{this.inputValue=e,this.updateChanges()},this.state={paramType:null,factData:null,selectedValueComponent:null},this.paramTypes[0]="Input Values",this.paramTypes[1]="Previous Request",this.paramTypes[2]="Previous Response",this.paramTypes[3]="Function"}render(){return n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.paramTypes[this.state.paramType],onSelect:this.handleParamTypeChange},this.getParamTypeMenu())),n.a.createElement(bt.a,null,this.getValueComponent()),n.a.createElement(bt.a,null,this.getRequestFactComponent()))}}class Ft extends n.a.Component{constructor(){var e;super(),e=this,this.handleValueChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a,s){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.state.params)[a]=s,e.props.request.params=n,t.next=5,e.setState({params:n});case 5:e.updatePath();case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.updatePath=()=>{let e=this.props.request.operationPath;for(let t in this.state.params)e=e.replace("{"+t+"}",this.state.params[t]);this.props.request.path=e,this.props.onChange()},this.getPathItems=()=>{if(!this.props.rootParameters)return null;const e=this.props.rootParameters.filter(e=>"path"===e.in);return e.length<=0?null:n.a.createElement(ft.a,{className:"mb-2"},n.a.createElement(bt.a,null,n.a.createElement(Fe.a,{size:"small",title:"Path Parameters"},n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(pe.a,null,e.map(e=>n.a.createElement(ft.a,{className:"mb-2",key:e.name},n.a.createElement(bt.a,{span:8},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},e.name)),n.a.createElement(bt.a,{span:16},this.getValueInput(e))))))))))},this.getValueInput=e=>{this.props.request.params||(this.props.request.params={}),this.props.request.params[e.name]||(this.props.request.params[e.name]="");const t=this.props.request.params[e.name];let a=null;if(t.startsWith("{$inputs.")){const e=t.slice(9,t.length-1),s=xe.a.get(this.props.inputValues,e);s&&(a=n.a.createElement(ge.a,{style:{borderStyle:"dashed"}},s))}return e.schema&&e.schema.enum?n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{onChange:t=>this.handleValueChange(e.name,t),value:this.props.request.params[e.name]},e.schema.enum.map(e=>n.a.createElement(St,{key:e,value:e},e))),a):n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Value",value:this.props.request.params[e.name],onChange:t=>this.handleValueChange(e.name,t.target.value)}),a)},this.state={params:{}}}render(){return n.a.createElement(n.a.Fragment,null,this.getPathItems())}}class Nt extends n.a.Component{constructor(){var e;super(),e=this,this.bodySchema={},this.componentDidMount=()=>{this.bodySchema=(new Ee.a).getBodyFactData(this.props.resourceDefinition);let e=[];this.props.rootParameters&&(e=e.concat(this.props.rootParameters)),this.props.resourceDefinition&&this.props.resourceDefinition.parameters&&(e=e.concat(this.props.resourceDefinition.parameters));let t={};for(let a in e)t[e[a].name]={description:e[a].description};this.setState({allParamsFromDefinition:e,allParamsObject:t})},this.componentDidUpdate=()=>{console.log(this.props),this.refs.bodyEditor&&this.refs.bodyEditor.jsonEditor.update(this.props.request.body?this.props.request.body:{})},this.addHeaderItemsFromDefinition=function(){var t=Object(ee.a)(Y.a.mark((function t(a=!1){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.allParamsFromDefinition.forEach(t=>{"header"===t.in&&(a&&!t.required||(e.props.request.headers?e.props.request.headers[t.name]||(e.props.request.headers[t.name]=""):(e.props.request.headers={},e.props.request.headers[t.name]="")))}),e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),this.addHeaderItem=e=>{this.props.request.headers||(this.props.request.headers={}),this.props.request.headers[e]=this.props.request.headers[e]?this.props.request.headers[e]:"",this.updateChanges()},this.handleHeaderItemChange=(e,t,a)=>{this.props.request.headers[t]=a,this.updateChanges()},this.handleHeaderItemDelete=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete e.props.request.headers[a],e.updateChanges();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.handleBodyChange=e=>{this.props.request.body=e,this.updateChanges()},this.handleAddHeaderClick=e=>{this.addHeaderItem(e.item.props.children)},this.headerItemsMenu=()=>{const e=this.state.allParamsFromDefinition.filter(e=>"header"===e.in).map((e,t)=>n.a.createElement(ae.a.Item,{key:t},e.name));return n.a.createElement(ae.a,{onClick:this.handleAddHeaderClick},e)},this.updateChanges=()=>{this.props.onChange(this.props.request)},this.getHeaderItems=()=>{let e=[],t=0;if(this.props.request)for(let a in this.props.request.headers){const s={name:a,value:this.props.request.headers[a]},r=t++;e.push(n.a.createElement(wt,{key:r,itemKey:s.name,name:s.name,value:s.value,description:this.state.allParamsObject[s.name]?this.state.allParamsObject[s.name].description:null,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition,onChange:this.handleHeaderItemChange,onDelete:this.handleHeaderItemDelete,inputValues:this.props.inputValues}))}return e},this.handleAddConfigParam=e=>{this.setState({configurableParameterSelected:e})},this.handlePopulateSampleBodyClick=Object(ee.a)(Y.a.mark((function t(){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Ee.a).generateSample(e.bodySchema);case 2:(a=t.sent)&&(e.props.request.body=a,e.refs.bodyEditor.jsonEditor.update(e.props.request.body),e.updateChanges());case 4:case"end":return t.stop()}}),t)}))),this.handleConfigParamCopyToClipboard=()=>{navigator.clipboard.writeText(this.state.configurableParameterSelected),ne.a.success("Copied to clipboard")},this.state={configurableParameterSelected:"",allParamsFromDefinition:[],allParamsObject:{}}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(xt,{onChange:this.handleAddConfigParam,rootParameters:this.props.rootParameters,resourceDefinition:this.props.resourceDefinition,openApiDefinition:this.props.openApiDefinition,callbackMap:this.props.callbackMap,inputValues:this.props.inputValues,allRequests:this.props.allRequests}))),this.state.configurableParameterSelected?n.a.createElement(ft.a,{className:"mt-4 text-center"},n.a.createElement(bt.a,null,n.a.createElement(ge.a,{color:"geekblue"},n.a.createElement("a",{onClick:this.handleConfigParamCopyToClipboard},this.state.configurableParameterSelected)))):null);return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(Fe.a,{size:"small",title:"Headers"},n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(pe.a,null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:8},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Name")),n.a.createElement(bt.a,{span:8},n.a.createElement("label",{className:"form-control-label",htmlFor:"input-city"},"Value"))),this.getHeaderItems()),n.a.createElement(Ne.a,{overlay:this.headerItemsMenu()},n.a.createElement(B.a,{color:"primary",size:"sm",onClick:e=>e.preventDefault()},"Add Header")),n.a.createElement(B.a,{color:"danger",onClick:()=>this.addHeaderItemsFromDefinition(!0),size:"sm"},"Add Required Headers"),n.a.createElement(B.a,{color:"info",onClick:()=>this.addHeaderItemsFromDefinition(!1),size:"sm"},"Add All Headers")))))),this.props.resourceDefinition&&this.props.resourceDefinition.requestBody?n.a.createElement(ft.a,{className:"mt-2"},n.a.createElement(bt.a,null,n.a.createElement(Fe.a,{size:"small",title:"Body"},n.a.createElement(ft.a,{className:"mb-2"},n.a.createElement(bt.a,{span:12},n.a.createElement(we.a,{content:e,title:"Select a Configurable Parameter",trigger:"click"},n.a.createElement(B.a,{color:"secondary",size:"sm"},"Add Configurable Params"))),n.a.createElement(bt.a,{span:12,style:{textAlign:"right"}},n.a.createElement(B.a,{color:"success",size:"sm",onClick:this.handlePopulateSampleBodyClick},"Populate with sample body"))),n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(ue.a,{ref:"bodyEditor",value:this.props.request.body?this.props.request.body:{},ace:me.a,ajv:Dt,theme:"ace/theme/tomorrow_night_blue",mode:"code",search:!1,statusBar:!1,navigationBar:!1,onChange:this.handleBodyChange,schema:this.bodySchema})))))):null)}}class wt extends n.a.Component{constructor(){super(),this.inputValue=null,this.componentDidMount=()=>{this.inputValue=this.props.value},this.componentDidUpdate=()=>{this.inputValue=this.props.value},this.getDynamicValue=()=>{let e=null;if(this.inputValue&&this.inputValue.startsWith("{$inputs.")){const t=this.inputValue.slice(9,this.inputValue.length-1),a=xe.a.get(this.props.inputValues,t);a&&(e=n.a.createElement(ge.a,{style:{borderStyle:"dashed"}},a))}return e},this.handleNameChange=e=>{this.props.onChange(this.props.itemKey,e.target.value,this.props.value)},this.handleValueChange=e=>{this.inputValue=e.target.value,this.props.onChange(this.props.itemKey,this.props.name,this.inputValue)},this.handleDelete=()=>{this.props.onDelete(this.props.itemKey)},this.state={name:"",value:""}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{className:"mb-2",gutter:16},n.a.createElement(bt.a,{span:8},n.a.createElement(de.a,{placement:"topLeft",title:this.props.description},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Name",type:"text",defaultValue:this.props.name,value:this.props.name,onChange:this.handleNameChange,disabled:!1}))),n.a.createElement(bt.a,{span:14},n.a.createElement(ie.a,{className:"form-control-alternative",placeholder:"Value",type:"text",defaultValue:this.props.value,value:this.props.value,onChange:this.handleValueChange,disabled:!1}),this.getDynamicValue()),n.a.createElement(bt.a,{span:2},n.a.createElement(re.a,{type:"delete",theme:"twoTone",twoToneColor:"#eb2f96",key:this.props.name,onClick:this.handleDelete}))))}}class Ot extends n.a.Component{constructor(){super(),this.handleRequestChange=()=>{this.props.onChange(this.props.request)},this.state={}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(ft.a,{className:"mt-2"},n.a.createElement(bt.a,null,this.props.resource?n.a.createElement(n.a.Fragment,null,n.a.createElement(Ft,{request:this.props.request,inputValues:this.props.inputValues,onChange:this.handleRequestChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters}),n.a.createElement(Nt,{request:this.props.request,inputValues:this.props.inputValues,allRequests:this.props.allRequests,onChange:this.handleRequestChange,resourceDefinition:this.props.resourceDefinition,rootParameters:this.props.rootParameters,openApiDefinition:this.props.openApiDefinition,callbackMap:this.props.callbackMap})):null))))}}var Vt=Ot,At=a(308),Tt=a.n(At);a(678),a(679);const It=te.a.Option,qt=se.a.Panel;class jt extends n.a.Component{constructor(){var e;super(),e=this,this.paramTypes=[],this.inputValue=null,this.getParamTypeMenu=()=>this.paramTypes.map((e,t)=>n.a.createElement(It,{key:t,value:t},e)),this.handleParamTypeChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({paramType:a,factData:null,selectedValueComponent:null});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getValueComponent=()=>{switch(this.state.paramType){case 0:let e=[];for(let r in this.props.inputValues)e.push(n.a.createElement(It,{key:r,value:r},r));return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.state.selectedValueComponent,onChange:e=>{this.state.selectedValueComponent=e,this.handleParamSelect("{$inputs."+e+"}")}},e));case 1:const t=(new Ee.a).getBodyFactData(this.props.resourceDefinition),a=(new Ee.a).getHeadersFactData(this.props.resourceDefinition,this.props.rootParameters),s={properties:{body:t,headers:Object(X.a)({type:"object"},a)}};return s?n.a.createElement(Ee.b,{key:this.props.name,factData:s,onSelect:this.handleFactSelect}):null;default:return null}},this.handleParamSelect=e=>{this.props.onChange(e)},this.handleFactSelect=(e,t)=>{e.startsWith("headers.")&&(e=e.replace(/^headers\.(.*)/,"headers['$1']")),this.inputValue=e,this.handleParamSelect("{$request."+e+"}")},this.state={paramType:null,factData:null,selectedValueComponent:null},this.paramTypes[0]="Input Values",this.paramTypes[1]="Request"}render(){return n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.paramTypes[this.state.paramType],onSelect:this.handleParamTypeChange},this.getParamTypeMenu())),n.a.createElement(bt.a,null,this.getValueComponent()))}}class Mt extends n.a.Component{constructor(){var e;super(),e=this,this.operators=[],this.handleOperatorChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({selectedOperatorIndex:a});case 2:e.props.onChange(e.operators[a].name);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getOperatorsMenu=()=>this.operators.map((e,t)=>n.a.createElement(It,{key:t,value:t},e.description)),this.state={selectedOperatorIndex:null},this.operators[0]={name:"to.equal",description:"Equal to"},this.operators[1]={name:"to.not.equal",description:"Not Equal to"},this.operators[2]={name:"to.have.property",description:"Have Property"},this.operators[3]={name:"to.not.have.property",description:"Not to have property"}}render(){return n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.state.selectedOperatorIndex,onSelect:this.handleOperatorChange},this.getOperatorsMenu())}}class Ht extends n.a.Component{constructor(){var e;super(),e=this,this.factTypes=[],this.inputValue=null,this.getFactTypeMenu=()=>this.factTypes.map((e,t)=>n.a.createElement(It,{key:t,value:t},e)),this.handleFactTypeChange=function(){var t=Object(ee.a)(Y.a.mark((function t(a){var s,n,r,l;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=null,t.t0=a,t.next=0===t.t0?4:1===t.t0?6:12;break;case 4:return s=(new Ee.a).getCustomFactData(["status","statusText"]),t.abrupt("break",13);case 6:return n=(new Ee.a).getHeadersFactData(e.props.successCallbackDefinition,e.props.successCallbackRootParameters),r=(new Ee.a).getBodyFactData(e.props.successCallbackDefinition),l=(new Ee.a).getBodyFactData(e.props.errorCallbackDefinition),xe.a.merge(r,l),s={type:"object",properties:{headers:Object(X.a)({type:"object"},n),body:r}},t.abrupt("break",13);case 12:s=null;case 13:return t.next=15,e.setState({factType:a,factData:s});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getRequestFactComponent=()=>this.state.factData?n.a.createElement(Ee.b,{key:this.props.name,factData:this.state.factData,onSelect:this.handleFactSelect,enableNodesSelection:!0}):null,this.handleFactSelect=function(){var t=Object(ee.a)(Y.a.mark((function t(a,s){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.startsWith("headers.")&&(a=a.replace(/^headers\.(.*)/,"headers['$1']")),t.next=3,e.setState({selectedFact:a});case 3:e.updateChanges();case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.updateChanges=()=>{let e="";switch(this.state.factType){case 0:e="response."+this.state.selectedFact;break;case 1:e="callback."+this.state.selectedFact;break;default:e=this.state.selectedFact}this.props.onChange(e)},this.state={factType:null,factData:null,selectedFact:null},this.factTypes[0]="Response",this.factTypes[1]="Callback"}render(){return n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(te.a,{placeholder:"Please Select",style:{width:200},value:this.factTypes[this.state.factType],onSelect:this.handleFactTypeChange},this.getFactTypeMenu())),n.a.createElement(bt.a,null,this.getRequestFactComponent()))}}class zt extends n.a.Component{constructor(){super(),this.getAssertionProps=e=>{const t=new RegExp("^expect\\((.*)\\)\\.(.*)\\((.*)\\)$").exec(e);return t?{fact:t[1],operator:t[2],value:t[3]}:null},this.handleFactChange=e=>{this.setState({fact:e})},this.handleOperatorChange=e=>{this.setState({operator:e})},this.handleValueChange=e=>{this.setState({value:e})},this.handleOnSave=()=>{if(this.state.fact&&this.state.operator&&this.state.value){let e;e="response.status"===this.state.fact?"expect("+this.state.fact+")."+this.state.operator+"("+this.state.value+")":"expect("+this.state.fact+")."+this.state.operator+"('"+this.state.value+"')",this.props.onSave(e)}},this.state={fact:null,operator:null,value:null}}render(){return n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:6},n.a.createElement(Ht,{value:this.state.selectedFact,resourceDefinition:this.props.resourceDefinition,successCallbackDefinition:this.props.successCallbackDefinition,errorCallbackDefinition:this.props.errorCallbackDefinition,successCallbackRootParameters:this.props.successCallbackRootParameters,errorCallbackRootParameters:this.props.errorCallbackRootParameters,onChange:this.handleFactChange})),n.a.createElement(bt.a,{span:6},n.a.createElement(Mt,{onChange:this.handleOperatorChange})),n.a.createElement(bt.a,{span:6},n.a.createElement(ie.a,{placeholder:"Enter value",type:"text",value:this.state.value,onChange:e=>{this.handleValueChange(e.target.value)}})),n.a.createElement(bt.a,{span:6},n.a.createElement(B.a,{color:"success",size:"sm",onClick:()=>{this.handleOnSave()}},"Save")))}}class _t extends n.a.Component{constructor(){var e;super(),e=this,this.componentDidMount=Object(ee.a)(Y.a.mark((function t(){var a,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null,s=null,e.props.request&&e.props.request.operationPath&&e.props.request.method&&(s={path:e.props.request.operationPath,method:e.props.request.method}),!e.props.request||!e.props.request.apiVersion){t.next=7;break}return a=e.props.request.apiVersion,t.next=7,e.fetchAllApiData(a.type,a.majorVersion+"."+a.minorVersion);case 7:e.setState({selectedResource:s,selectedApiVersion:a});case 8:case"end":return t.stop()}}),t)}))),this.fetchAllApiData=function(){var t=Object(ee.a)(Y.a.mark((function t(a,s){var n,r,l;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDefinition(a,s);case 2:return n=t.sent,r={},t.prev=4,t.next=7,e.getCallbackMap(a,s);case 7:r=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:return l={},t.prev=13,t.next=16,e.getResponseMap(a,s);case 16:l=t.sent,t.next=21;break;case 19:t.prev=19,t.t1=t.catch(13);case 21:e.setState({openApiDefinition:n,callbackMap:r,responseMap:l});case 22:case"end":return t.stop()}}),t,null,[[4,10],[13,19]])})));return function(e,a){return t.apply(this,arguments)}}(),this.getDefinition=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/definition/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getResponseMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/response_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getCallbackMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/callback_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getResourceDefinition=()=>this.state.selectedResource&&this.state.openApiDefinition&&this.state.selectedResource.path&&this.state.selectedResource.method?this.state.openApiDefinition.paths[this.state.selectedResource.path][this.state.selectedResource.method]:null,this.getCallbackObject=(e=!1)=>{let t=null;return t=e?this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].errorCallback:this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].successCallback,t},this.getCallbackRootParameters=(e=!1)=>{try{const t=this.getCallbackObject(e);return this.state.openApiDefinition.paths[t.path].parameters}catch(t){return[]}},this.getCallbackDefinition=(e=!1)=>{if(this.state.selectedResource)try{const t=this.getCallbackObject(e);return this.state.openApiDefinition.paths[t.path][t.method]}catch(t){return null}return null},this.onEditorChange=e=>{const t=e.split("\n");this.props.onChange(this.props.itemKey,t)},this.handleAddExpectationSave=e=>{this.props.assertion.exec||(this.props.assertion.exec=[]),this.props.assertion.exec.push(e),this.setState({showAddExpectationDialog:!1})},this.handleAddConfigParam=e=>{this.setState({configurableParameterSelected:e})},this.handleConfigParamCopyToClipboard=()=>{navigator.clipboard.writeText(this.state.configurableParameterSelected),ne.a.success("Copied to clipboard")},this.handleConfigParamInsertIntoEditor=()=>{this.replaceEditorSelection(this.state.configurableParameterSelected),ne.a.success("Pasted to editor")},this.replaceEditorSelection=e=>{const t=this.refs.assertionAceEditor.editor,a=t.selection.getRange();t.session.replace(a,e)},this.state={openApiDefinition:null,callbackMap:null,responseMap:null,selectedResource:null,showAddExpectationDialog:!1,showConfigurableParameterDialog:!1,configurableParameterSelected:!1}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Expectation",className:"w-50 p-3",visible:!!this.state.showAddExpectationDialog,footer:null,onCancel:()=>{this.setState({showAddExpectationDialog:!1})}},this.state.selectedResource?n.a.createElement(zt,{resourceDefinition:this.getResourceDefinition(),successCallbackDefinition:this.getCallbackDefinition(!1),successCallbackRootParameters:this.getCallbackRootParameters(!1),errorCallbackDefinition:this.getCallbackDefinition(!0),errorCallbackRootParameters:this.getCallbackRootParameters(!0),onSave:this.handleAddExpectationSave}):null),n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Configurable Parameter",className:"w-50 p-3",visible:!!this.state.showConfigurableParameterDialog,footer:null,onCancel:()=>{this.setState({showConfigurableParameterDialog:!1})}},this.state.selectedResource?n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(jt,{onChange:this.handleAddConfigParam,rootParameters:this.getCallbackRootParameters(!1),resourceDefinition:this.getResourceDefinition(),inputValues:this.props.inputValues}))),this.state.configurableParameterSelected?n.a.createElement(ft.a,{className:"mt-4 text-center"},n.a.createElement(bt.a,null,n.a.createElement(ge.a,{color:"geekblue"},this.state.configurableParameterSelected),n.a.createElement(B.a,{className:"ml-2",color:"info",size:"sm",onClick:this.handleConfigParamCopyToClipboard},"Copy to clipboard"),n.a.createElement(B.a,{className:"ml-2",color:"danger",size:"sm",onClick:this.handleConfigParamInsertIntoEditor},"Insert into editor"))):null):null),n.a.createElement(Tt.a,{ref:"assertionAceEditor",mode:"javascript",theme:"eclipse",width:"100%",height:"100px",value:this.props.assertion.exec?this.props.assertion.exec.join("\n"):"",onChange:this.onEditorChange,name:"UNIQUE_ID_OF_DIV",wrapEnabled:!0,showPrintMargin:!0,showGutter:!0,tabSize:2,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),n.a.createElement(B.a,{className:"float-left mt-2",color:"info",size:"sm",onClick:()=>{this.setState({showAddExpectationDialog:!0})}},"Add Expectation"),n.a.createElement(B.a,{className:"float-right mt-2",color:"secondary",size:"sm",onClick:()=>{this.setState({showConfigurableParameterDialog:!0})}},"Configurable Parameter"))}}class Lt extends n.a.Component{constructor(){super(),this.handleAssertionChange=(e,t)=>{this.props.request.tests.assertions[e].exec=t,this.props.onChange(this.props.request)},this.getAssertionItems=()=>{const e=this.props.request.status&&this.props.request.status.testResult&&this.props.request.status.testResult.results?this.props.request.status.testResult.results:{};return this.props.request.tests.assertions.map((t,a)=>{let s=null;return e[t.id]&&(s=n.a.createElement(de.a,{placement:"topLeft",title:e[t.id].message},n.a.createElement(ge.a,{color:"FAILED"==e[t.id].status?"#f50":"#87d068"},e[t.id].status))),n.a.createElement(qt,{header:t.description,key:a,extra:s},n.a.createElement(ft.a,{className:"mb-2"},n.a.createElement(bt.a,null,n.a.createElement(B.a,{className:"float-right",color:"danger",size:"sm",onClick:()=>{this.handleDeleteAssertionClick(a)}},"Delete"))),n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(_t,{itemKey:a,assertion:t,request:this.props.request,inputValues:this.props.inputValues,onChange:this.handleAssertionChange}))))})},this.handleAddNewAssertionClick=e=>{let t=+this.props.request.tests.assertions.reduce((function(e,t){return t.id>e?t.id:e}),0);this.props.request.tests.assertions.push({id:t+1,description:e}),this.props.onChange(this.props.request)},this.handleDeleteAssertionClick=e=>{this.props.request.tests.assertions.splice(e,1),this.props.onChange(this.props.request)},this.state={newAssertionDescription:null,addNewAssertionDialogVisible:!1}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Enter description",type:"text",value:this.state.newAssertionDescription,onChange:e=>{this.setState({newAssertionDescription:e.target.value})}}),n.a.createElement(B.a,{className:"text-right mt-2",color:"success",href:"#pablo",onClick:()=>{this.handleAddNewAssertionClick(this.state.newAssertionDescription),this.setState({addNewAssertionDialogVisible:!1})},size:"sm"},"Add"));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,{className:"text-left"},n.a.createElement(we.a,{content:e,title:"Enter a description for the assertion",trigger:"click",visible:this.state.addNewAssertionDialogVisible,onVisibleChange:e=>this.setState({addNewAssertionDialogVisible:e})},n.a.createElement(B.a,{className:"text-right float-right",color:"primary",size:"sm"},"Add New Assertion")))),n.a.createElement(ft.a,{className:"mt-2"},n.a.createElement(bt.a,null,this.props.request.tests?n.a.createElement(n.a.Fragment,null,n.a.createElement(se.a,{onChange:this.handleRuleItemActivePanelChange},this.getAssertionItems())):null))))}}var Bt=Lt;const Ut=te.a.Option,Kt=yt.a.Step,Jt=kt.a.TabPane;class $t extends n.a.Component{constructor(){super(),this.resourceOptions=[],this.getResourceOptions=()=>{if(this.resourceOptions=[],this.props.openApiDefinition&&this.props.openApiDefinition.paths){for(let e in this.props.openApiDefinition.paths)for(let t in this.props.openApiDefinition.paths[e]){let a=t+" "+e;switch(t){case"get":case"post":this.resourceOptions.push(n.a.createElement(Ut,{key:a,value:a},a))}}}return this.resourceOptions},this.getResourceValue=()=>this.props.value?this.props.value.method+" "+this.props.value.path:null,this.state={selectedItem:null}}render(){return n.a.createElement(te.a,{onChange:e=>{const t=e.split(" "),a={method:t[0],path:t[1]};this.state.selectedItem=a,this.props.onSelect(a)},disabled:!!this.props.value,style:{width:300},placeholder:"Select a resource",value:this.getResourceValue()},this.getResourceOptions())}}class Wt extends n.a.Component{constructor(){super(),this.apiVersionOptions=[],this.getApiVersionOptions=()=>(this.apiVersionOptions=this.props.apiVersions.map((e,t)=>n.a.createElement(Ut,{key:t,value:JSON.stringify(e)},e.type," ",e.majorVersion,".",e.minorVersion)),this.apiVersionOptions),this.getApiVersionValue=()=>this.props.value?JSON.stringify(this.props.value):null}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(te.a,{onChange:e=>{this.props.onSelect(JSON.parse(e))},disabled:!!this.props.value,style:{width:300},placeholder:"Select an API",value:this.getApiVersionValue()},this.getApiVersionOptions()))}}class Gt extends n.a.Component{constructor(){var e;super(),e=this,this.componentDidMount=Object(ee.a)(Y.a.mark((function t(){var a,s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getApiVersions();case 2:if(a=t.sent,{},s=null,e.props.request&&e.props.request.operationPath&&e.props.request.method&&(s={path:e.props.request.operationPath,method:e.props.request.method}),n=null,!e.props.request||!e.props.request.apiVersion){t.next=11;break}return n=e.props.request.apiVersion,t.next=11,e.fetchAllApiData(n.type,n.majorVersion+"."+n.minorVersion);case 11:e.setState({selectedResource:s,apiVersions:a,selectedApiVersion:n});case 12:case"end":return t.stop()}}),t)}))),this.fetchAllApiData=function(){var t=Object(ee.a)(Y.a.mark((function t(a,s){var n,r,l;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getDefinition(a,s);case 2:return n=t.sent,r={},t.prev=4,t.next=7,e.getCallbackMap(a,s);case 7:r=t.sent,t.next=12;break;case 10:t.prev=10,t.t0=t.catch(4);case 12:return l={},t.prev=13,t.next=16,e.getResponseMap(a,s);case 16:l=t.sent,t.next=21;break;case 19:t.prev=19,t.t1=t.catch(13);case 21:e.setState({openApiDefinition:n,callbackMap:r,responseMap:l});case 22:case"end":return t.stop()}}),t,null,[[4,10],[13,19]])})));return function(e,a){return t.apply(this,arguments)}}(),this.getConditions=()=>this.state.conditions,this.getPathMethodConditions=()=>this.state.pathMethodConditions,this.getRequest=()=>this.state.request,this.getRule=()=>{const e={description:this.state.description,conditions:{all:[...this.state.conditions,...this.state.pathMethodConditions]},request:this.state.request};return JSON.stringify(e,null,2)},this.handleConditionsChange=()=>{this.forceUpdate()},this.handleRequestChange=e=>{this.setState({request:e}),this.props.onChange(e)},this.getApiVersions=Object(ee.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/api_versions");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),this.getDefinition=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/definition/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getResponseMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/response_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getCallbackMap=function(){var e=Object(ee.a)(Y.a.mark((function e(t,a){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("http://localhost:5050/api/openapi/callback_map/".concat(t,"/").concat(a));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.apiVersionSelectHandler=e=>{this.fetchAllApiData(e.type,e.majorVersion+"."+e.minorVersion);const t=this.props.request;t.apiVersion=e,this.props.onChange(t),this.setState({selectedApiVersion:e})},this.resourceSelectHandler=e=>{const t=this.props.request;t.operationPath=e.path,t.path=e.path,t.method=e.method,this.props.onChange(t),this.setState({selectedResource:e,request:t})},this.getResourceDefinition=()=>this.state.selectedResource&&this.state.openApiDefinition&&this.state.selectedResource.path&&this.state.selectedResource.method?this.state.openApiDefinition.paths[this.state.selectedResource.path][this.state.selectedResource.method]:null,this.getRootParameters=()=>{var e=[];return this.state.selectedResource&&this.state.openApiDefinition&&this.state.selectedResource.path&&this.state.selectedResource.method&&(e=this.state.openApiDefinition.paths[this.state.selectedResource.path].parameters),e},this.getCallbackObject=()=>{let e=null;try{e="validation"===this.props.mode?this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].errorCallback:this.state.callbackMap[this.state.selectedResource.path][this.state.selectedResource.method].successCallback}catch(t){}return e},this.getCallbackRootParameters=()=>{try{const e=this.getCallbackObject();return this.state.openApiDefinition.paths[e.path].parameters}catch(e){return[]}},this.getCallbackDefinition=()=>{if(this.state.selectedResource)try{const e=this.getCallbackObject();return this.state.openApiDefinition.paths[e.path][e.method]}catch(e){return null}return null},this.handleDescriptionChange=e=>{this.setState({description:e})},this.state={origJson:[],curJson:{},description:"",request:{},conditions:[],pathMethodConditions:[],openApiDefinition:null,selectedResource:null,selectedApiVersion:null,callbackMap:{},apiVersions:[]}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(ft.a,{className:"align-items-center"},n.a.createElement(bt.a,{span:16},n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{align:"right"},n.a.createElement("b",null,"API:")),n.a.createElement("td",null,n.a.createElement(Wt,{value:this.state.selectedApiVersion,apiVersions:this.state.apiVersions,onSelect:this.apiVersionSelectHandler}))),n.a.createElement("tr",null,n.a.createElement("td",{align:"right"},n.a.createElement("b",null,"Resource:")),n.a.createElement("td",null,n.a.createElement($t,{value:this.state.selectedResource,openApiDefinition:this.state.openApiDefinition,onSelect:this.resourceSelectHandler})))))),n.a.createElement(bt.a,{span:8},n.a.createElement(ft.a,{className:"text-right float-right"},n.a.createElement(bt.a,null,n.a.createElement(B.a,{className:"float-right",color:"danger",size:"sm",onClick:()=>{this.props.onDelete(this.props.request.id)}},"Delete"))))),n.a.createElement(ft.a,null,n.a.createElement(bt.a,null,n.a.createElement(w.a,null,n.a.createElement(Vt,{request:this.props.request,allRequests:this.props.allRequests,inputValues:this.props.inputValues,onChange:this.handleRequestChange,resource:this.state.selectedResource,resourceDefinition:this.getResourceDefinition(),rootParameters:this.getRootParameters(),openApiDefinition:this.state.openApiDefinition,callbackMap:this.state.callbackMap})))))))}}class Qt extends n.a.Component{constructor(){super(),this.componentWillUnmount=()=>{},this.componentDidMount=()=>{},this.replaceInputValues=(e,t)=>{var a;if("string"===typeof e)a=e;else{if("object"!==typeof e)return e;a=JSON.stringify(e)}const s=a.match(/{\$([^}]+)}/g);return s&&s.forEach(e=>{switch(e.split(".")[0]){case"{$inputs":default:const t=e.slice(9,e.length-1),s=xe.a.get(this.props.inputValues,t);s&&(a=a.replace(e,s))}}),"object"===typeof e?JSON.parse(a):a},this.getRequestGeneratorItems=()=>this.props.testCase.requests?this.props.testCase.requests.map(e=>{const t=e.status&&e.tests&&e.status.testResult?e.status.testResult.passedCount+"/"+e.tests.assertions.length:"",a=e.status&&e.tests&&e.status.testResult&&e.status.testResult.passedCount===e.tests.assertions.length?"#87d068":"#f50";return n.a.createElement(bt.a,{span:24/(this.props.testCase.requests.length?this.props.testCase.requests.length:1)},!e.status||"waiting"!==e.status.state&&"process"!==e.status.state?n.a.createElement(kt.a,{defaultActiveKey:"1"},n.a.createElement(Jt,{tab:"Request",key:"1"},e.headers?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Header"),n.a.createElement("pre",null,JSON.stringify(this.replaceInputValues(e.headers),null,2))):null,e.body?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Body"),n.a.createElement("pre",null,JSON.stringify(this.replaceInputValues(e.body),null,2))):null),n.a.createElement(Jt,{tab:"Editor",key:"2"},n.a.createElement(Gt,{request:e,allRequests:this.props.testCase.requests,inputValues:this.props.inputValues,onChange:this.props.onChange,onDelete:this.handleRequestDelete})),n.a.createElement(Jt,{tab:n.a.createElement(Pt.a,{offset:[20,0],style:{backgroundColor:a},count:t},"Tests"),key:"4"},n.a.createElement(Bt,{request:e,allRequests:this.props.testCase.requests,inputValues:this.props.inputValues,onChange:this.props.onChange,onDelete:this.handleRequestDelete})),e.status&&e.status.response?n.a.createElement(Jt,{tab:"Response",key:"3"},e.status.response?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Synchronous Response"),n.a.createElement("pre",null,JSON.stringify(e.status.response,null,2))):null,e.status.callback?n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",null,"Callback"),n.a.createElement("pre",null,JSON.stringify(e.status.callback,null,2))):null):null):n.a.createElement(Rt.a,{paragraph:{rows:10},active:!0}))}):null,this.getStepItems=()=>{if(this.props.testCase.requests){const e=this.props.testCase.requests.map(e=>n.a.createElement(Kt,{status:e.status?e.status.state:null,title:e.method,subTitle:e.operationPath,description:e.description})),t=e.length<3?8*e.length:24;return n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:t},n.a.createElement(yt.a,{current:-1,type:"navigation",size:"default"},e)))}return null},this.handleAddNewRequestClick=e=>{let t=+this.props.testCase.requests.reduce((function(e,t){return t.id>e?t.id:e}),0);this.props.testCase.requests.push({id:t+1,description:e}),this.forceUpdate()},this.handleRequestDelete=e=>{const t=this.props.testCase.requests.findIndex(t=>t.id==e);this.props.testCase.requests.splice(t,1),this.forceUpdate()},this.state={addNewRequestDialogVisible:!1,newRequestDescription:""}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Enter description",type:"text",value:this.state.newRequestDescription,onChange:e=>{this.setState({newRequestDescription:e.target.value})}}),n.a.createElement(B.a,{className:"text-right mt-2",color:"success",href:"#pablo",onClick:()=>{this.handleAddNewRequestClick(this.state.newRequestDescription),this.setState({addNewRequestDialogVisible:!1})},size:"sm"},"Add"));return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{className:"mt-4"},n.a.createElement(bt.a,{span:24},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,null,this.getStepItems(),n.a.createElement(we.a,{content:e,title:"Enter a description for the request",trigger:"click",visible:this.state.addNewRequestDialogVisible,onVisibleChange:e=>this.setState({addNewRequestDialogVisible:e})},n.a.createElement(B.a,{className:"text-right float-right",color:"primary",size:"sm"},"Add New Request"))),n.a.createElement(L.a,null,n.a.createElement(ft.a,{gutter:16},this.getRequestGeneratorItems()))))))}}var Xt=Qt;yt.a.Step;class Zt extends n.a.Component{constructor(){super(),this.componentWillUnmount=()=>{},this.componentDidMount=()=>{},this.getTestCaseItems=()=>{if(this.props.testCase.requests){const e=this.props.testCase.requests.map(e=>{const t=e.status&&e.tests&&e.status.testResult?e.status.testResult.passedCount+" / "+e.tests.assertions.length:"",a=e.status&&e.tests&&e.status.testResult&&e.status.testResult.passedCount===e.tests.assertions.length?"#87d068":"#f50";return n.a.createElement("tr",null,n.a.createElement("td",{className:"align-text-top",width:"25px"},n.a.createElement(re.a,{type:"double-right",style:{fontSize:"20px",color:"#08c"}})),n.a.createElement("td",null,n.a.createElement("h3",null,e.method.toUpperCase()+" "+e.operationPath)," ",n.a.createElement("p",null,e.description)),n.a.createElement("td",{className:"text-right align-top"},!e.status||"finish"!==e.status.state&&"error"!==e.status.state?null:n.a.createElement(ge.a,{color:a,className:"ml-2"},t)))});return n.a.createElement("table",{width:"100%",cellPadding:"5px"},n.a.createElement("tbody",null,e))}return null},this.state={addNewRequestDialogVisible:!1,newRequestDescription:""}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{className:"mb-2"},n.a.createElement(bt.a,{span:24},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,null,this.props.testCase.name),n.a.createElement(L.a,null,this.getTestCaseItems())))))}}var Yt=Zt;class ea extends n.a.Component{constructor(...e){super(...e),this.state={addInputValueDialogVisible:!1,newInputValueName:""},this.handleDeleteClick=e=>{this.props.onDelete(e)},this.getInputItems=()=>{let e=[];for(let t in this.props.values)e.push(n.a.createElement(n.a.Fragment,null,n.a.createElement(Et.a.Item,{label:t},n.a.createElement(ft.a,{gutter:8},n.a.createElement(bt.a,{span:23},n.a.createElement(ie.a,{value:this.props.values[t],onChange:e=>this.props.onChange(t,e.target.value)})),n.a.createElement(bt.a,{span:1},n.a.createElement(re.a,{key:t,type:"delete",theme:"filled",onClick:()=>this.handleDeleteClick(t)}))))));return e},this.handleAddInputValue=e=>{this.props.values.hasOwnProperty(e)?ne.a.error({content:"The input value name already exists",key:"InputValueNameExists",duration:3}):(this.props.onChange(e,""),this.state.newInputValueName="")}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Input Value Name",type:"text",value:this.state.newInputValueName,onChange:e=>{this.setState({newInputValueName:e.target.value})}}),n.a.createElement(B.a,{className:"text-right mt-2",color:"success",href:"#pablo",onClick:()=>{this.handleAddInputValue(this.state.newInputValueName),this.setState({addInputValueDialogVisible:!1})},size:"sm"},"Add"));return n.a.createElement(n.a.Fragment,null,n.a.createElement(ft.a,{gutter:16},n.a.createElement(bt.a,{span:24},n.a.createElement(z.a,{className:"bg-white shadow"},n.a.createElement(L.a,null,n.a.createElement(we.a,{content:e,title:"Enter a new name",trigger:"click",visible:this.state.addInputValueDialogVisible,onVisibleChange:e=>this.setState({addInputValueDialogVisible:e})},n.a.createElement(B.a,{className:"text-right float-right",color:"primary",size:"sm"},"Add Input Value")),n.a.createElement(w.a,null,n.a.createElement(Et.a,{title:"Input Values",bordered:!0,column:1},this.getInputItems())))))))}}class ta extends n.a.Component{constructor(){var e;super(),e=this,this.socket=null,this.componentWillUnmount=()=>{this.socket.disconnect()},this.componentDidMount=()=>{this.socket=gt()("http://127.0.0.1:5050"),this.socket.on("outboundProgress",this.handleIncomingProgress)},this.handleInputValuesChange=(e,t)=>{this.state.template.inputValues[e]=t,this.forceUpdate()},this.handleInputValuesDelete=e=>{delete this.state.template.inputValues[e],this.forceUpdate()},this.handleIncomingProgress=e=>{if("FINISHED"===e.status)ne.a.success({content:"Test case finished",key:"outboundSendProgress",duration:2});else{let t=this.state.template.test_cases.find(t=>t.id===e.testCaseId).requests.find(t=>t.id===e.requestId);if(t.status){if("SUCCESS"===e.status)t.status.state="finish",t.status.response=e.response,t.status.callback=e.callback,t.status.testResult=e.testResult;else if("ERROR"===e.status){t.status.state="error",t.status.response=e.response,t.status.callback=e.callback,t.status.testResult=e.testResult;for(let e in this.state.template.requests)this.state.template.requests[e].status||(this.state.template.requests[e].status={}),"process"===this.state.template.requests[e].status.state&&(this.state.template.requests[e].status.state="wait",this.state.template.requests[e].status.response=null,this.state.template.requests[e].status.callback=null,this.state.template.requests[e].status.testResult=null)}this.forceUpdate()}}},this.handleSendClick=Object(ee.a)(Y.a.mark((function t(){var a,s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Math.random().toString(36).substring(7),ne.a.loading({content:"Sending the outbound request...",key:"outboundSendProgress"}),t.next=4,ce.a.post("http://localhost:5050/api/outbound/template/"+a,e.state.template,{headers:{"Content-Type":"application/json"}});case 4:for(s in ne.a.success({content:"Test case initiated",key:"outboundSendProgress",duration:2}),e.state.template.test_cases)for(n in e.state.template.test_cases[s].requests)e.state.template.test_cases[s].requests[n].status||(e.state.template.test_cases[s].requests[n].status={}),e.state.template.test_cases[s].requests[n].status.state="process";e.forceUpdate();case 7:case"end":return t.stop()}}),t)}))),this.convertTemplate=e=>{let t=e.test_cases,a=Object(mt.a)(e,["test_cases"]),s=t;return t&&(s=t.map(e=>{if(e.requests){let t=e.requests,a=Object(mt.a)(e,["requests"]);const s=t.map(e=>{e.status;return Object(mt.a)(e,["status"])});return Object(X.a)({},a,{requests:s})}return e})),Object(X.a)({},a,{test_cases:s})},this.handleCreateNewTemplateClick=e=>{this.setState({template:{name:e,inputValues:{},requests:[]}})},this.download=(e,t,a)=>{var s=document.createElement("a"),n=new Blob([e],{type:a});s.href=URL.createObjectURL(n),s.download=t,s.click()},this.handleTemplateSaveClick=e=>{this.download(JSON.stringify(this.convertTemplate(this.state.template),null,2),e,"text/plain")},this.handleImportFile=e=>{ne.a.loading({content:"Reading the file...",key:"importFileProgress"});var t=new FileReader;t.onload=e=>{var t=e.target.result;try{var a=JSON.parse(t);this.setState({template:a}),ne.a.success({content:"File Loaded",key:"importFileProgress",duration:2})}catch(s){ne.a.error({content:s.message,key:"importFileProgress",duration:2})}},t.readAsText(e)},this.handleTestCaseChange=()=>{this.forceUpdate()},this.getTestCaseItems=()=>this.state.template.test_cases?this.state.template.test_cases.map((e,t)=>n.a.createElement(ft.a,{onClick:()=>{this.setState({showTestCaseIndex:t})}},n.a.createElement(bt.a,null,n.a.createElement(Yt,{testCase:e,onChange:this.handleTestCaseChange,inputValues:this.state.template.inputValues})))):null,this.state={request:{},template:{},addNewRequestDialogVisible:!1,newRequestDescription:"",newTemplateName:"",createNewTemplateDialogVisible:!1,saveTemplateFileName:"",saveTemplateDialogVisible:!1,showTestCaseIndex:null}}render(){const e=n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"Template name",type:"text",value:this.state.newTemplateName,onChange:e=>{this.setState({newTemplateName:e.target.value})}}),n.a.createElement(B.a,{className:"text-right mt-2",color:"success",href:"#pablo",onClick:()=>{this.handleCreateNewTemplateClick(this.state.newTemplateName),this.setState({createNewTemplateDialogVisible:!1})},size:"sm"},"Create")),t=n.a.createElement(n.a.Fragment,null,n.a.createElement(ie.a,{placeholder:"File name",type:"text",value:this.state.saveTemplateFileName,onChange:e=>{this.setState({saveTemplateFileName:e.target.value})}}),n.a.createElement(B.a,{className:"text-right mt-2",color:"success",href:"#pablo",onClick:()=>{this.handleTemplateSaveClick(this.state.saveTemplateFileName),this.setState({saveTemplateDialogVisible:!1})},size:"sm"},"Create"));return n.a.createElement(n.a.Fragment,null,n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Template",className:"w-50 p-3",visible:!!this.state.showTemplate,footer:null,onCancel:()=>{this.setState({showTemplate:!1})}},n.a.createElement("pre",null,JSON.stringify(this.convertTemplate(this.state.template),null,2))),n.a.createElement(le.a,{centered:!0,destroyOnClose:!0,forceRender:!0,title:"Test Case Viewer",width:"90%",visible:null!=this.state.showTestCaseIndex,footer:null,onCancel:()=>{this.setState({showTestCaseIndex:null})}},null!=this.state.showTestCaseIndex?n.a.createElement(Xt,{testCase:this.state.template.test_cases[this.state.showTestCaseIndex],onChange:this.handleTestCaseChange,inputValues:this.state.template.inputValues}):null),n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(L.a,null,n.a.createElement(Ct.a,{offsetTop:2},n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:24},n.a.createElement(z.a,{className:"bg-white shadow mb-4"},n.a.createElement(L.a,null,n.a.createElement(vt.a,{accept:".json",showUploadList:!1,beforeUpload:e=>(this.handleImportFile(e),!1)},n.a.createElement(B.a,{color:"success",size:"sm",onClick:e=>e.preventDefault()},"Import Template")),n.a.createElement(B.a,{className:"float-right",color:"danger",size:"sm",onClick:this.handleSendClick},"Send"),n.a.createElement(we.a,{className:"float-right",content:t,title:"Enter filename to save",trigger:"click",visible:this.state.saveTemplateDialogVisible,onVisibleChange:e=>this.setState({saveTemplateDialogVisible:e})},n.a.createElement(B.a,{className:"text-right float-right",color:"success",size:"sm"},"Save")),n.a.createElement(B.a,{className:"float-right",color:"info",size:"sm",onClick:()=>{this.setState({showTemplate:!0})}},"Show Template"),n.a.createElement(we.a,{className:"float-right",content:e,title:"Enter a name for the template",trigger:"click",visible:this.state.createNewTemplateDialogVisible,onVisibleChange:e=>this.setState({createNewTemplateDialogVisible:e})},n.a.createElement(B.a,{className:"text-right float-right",color:"primary",size:"sm"},"New Template"))))))),n.a.createElement(ft.a,null,n.a.createElement(bt.a,{span:16},this.getTestCaseItems()),n.a.createElement(bt.a,{span:8,className:"pl-2"},n.a.createElement(ea,{values:this.state.template.inputValues,onChange:this.handleInputValuesChange,onDelete:this.handleInputValuesDelete})))))))))}}var aa=ta,sa=a(51),na=(a(689),a(732));class ra extends sa.c{render(){const e=this.props.dataItem;return n.a.createElement(n.a.Fragment,null,e.additionalData?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("div",{style:{backgroundColor:"#1f4662",width:"100%",color:"#fff",fontSize:"12px"}},n.a.createElement("div",{style:{backgroundColor:"#193549",width:"100%",fontFamily:"monospace",color:"#ffc600"}}),n.a.createElement("pre",{style:{display:"block",width:"100%",margin:"0",overflow:"scroll",color:"#ffffff"}},JSON.stringify(e.additionalData,null,2)))):e.message)}}n.a.Component;class la extends n.a.Component{constructor(){super(),this.expandChange=e=>{e.dataItem.expanded=!e.dataItem.expanded,this.forceUpdate()},this.toggleLogsVisibility=()=>{this.setState({logsVisible:!this.state.logsVisible})},this.state={logsVisible:!1}}render(){const e=this.props.logs[0],t=this.props.info;return n.a.createElement(n.a.Fragment,null,n.a.createElement(na.a.Item,{position:"right"},n.a.createElement("b",null,e.logTime),n.a.createElement("br",null),n.a.createElement(ge.a,{color:t.erroneous?"#f50":"#2db7f5",onClick:this.toggleLogsVisibility},t.name),n.a.createElement("br",null),this.state.logsVisible?n.a.createElement(sa.a,{className:"align-items-center table-flush",data:this.props.logs,detail:ra,expandField:"expanded",onExpandChange:this.expandChange},n.a.createElement(sa.b,{field:"logTime",title:"Time"}),n.a.createElement(sa.b,{field:"message",title:"Message"}),n.a.createElement(sa.b,{field:"verbosity",title:"Verbosity"})):null))}}class ia extends n.a.Component{constructor(){super(),this.newState={logs:[],incomingItemsObj:{},incomingItemsArr:[],lastIncomingTime:null,endpoint:"http://127.0.0.1:5050"},this.socket=null,this.componentWillUnmount=()=>{this.socket.disconnect()},this.getTimelineItems=()=>this.state.incomingItemsArr.map(e=>e?n.a.createElement(la,{key:e.id,info:e,logs:this.state.incomingItemsObj[e.id]}):n.a.createElement(na.a.Item,{dot:n.a.createElement(re.a,{type:"clock-circle-o",style:{fontSize:"16px"}}),color:"red"},n.a.createElement("br",null),n.a.createElement("br",null))),this.handleClearLogs=()=>{this.setState(JSON.parse(JSON.stringify(this.newState)))},this.state=JSON.parse(JSON.stringify(this.newState))}componentDidMount(){const e=this.state.endpoint;this.socket=gt()(e),this.socket.on("newLog",e=>{if(this.state.logs.push(e),!this.state.incomingItemsObj.hasOwnProperty(e.uniqueId)){if(this.state.incomingItemsObj[e.uniqueId]=[],this.state.lastIncomingTime){const t=new Date(e.logTime)-this.state.lastIncomingTime;this.state.lastIncomingTime=new Date(e.logTime),t>1e3&&this.state.incomingItemsArr.push(null)}else this.state.lastIncomingTime=new Date(e.logTime);let t=e.message;e.resource&&(t=e.resource.method.toUpperCase()+" "+e.resource.path),this.state.incomingItemsArr.push({id:e.uniqueId,name:t,erroneous:!1})}if("error"===e.verbosity){const t=this.state.incomingItemsArr.findIndex(t=>!!t&&t.id===e.uniqueId);this.state.incomingItemsArr[t].erroneous=!0}this.state.incomingItemsObj[e.uniqueId].push(e),this.forceUpdate()})}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,{className:"mb-4"},n.a.createElement("div",{className:"col"},n.a.createElement(z.a,{className:"shadow"},n.a.createElement(_.a,{className:"border-0"},n.a.createElement(B.a,{className:"float-right",color:"danger",size:"sm",onClick:this.handleClearLogs},"Clear"),n.a.createElement("h3",{className:"mb-0"},"Monitor")),n.a.createElement(L.a,null,n.a.createElement(na.a,{reverse:!0,pending:"Monitoring..."},this.getTimelineItems()))))))}}class oa extends n.a.Component{constructor(){super(),this.state={}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(ia,null)))}}var ca=oa,pa=a(720);class ua extends n.a.Component{constructor(...e){super(...e),this.inputValue=null,this.handleValueChange=e=>{"boolean"===typeof this.props.value?this.inputValue=e.target.checked:this.inputValue=e.target.value,this.props.onChange(this.props.itemKey,this.inputValue)}}render(){const e="boolean"===typeof this.props.value?n.a.createElement(Oe.a,{checked:this.props.value,onChange:this.handleValueChange}):n.a.createElement(ie.a,{className:"form-control-alternative",type:"text",defaultValue:this.props.value,value:this.props.value,onChange:this.handleValueChange,disabled:!1});return n.a.createElement(F.a,{className:"mb-4"},n.a.createElement(N.a,{lg:"4"},n.a.createElement("h4",null,this.props.name)),n.a.createElement(N.a,{lg:"8"},this.props.tooltip?n.a.createElement(de.a,{placement:"topLeft",title:this.props.tooltip},e):e))}}class ha extends n.a.Component{constructor(...e){super(...e),this.handleParamValueChange=(e,t)=>{this.props.config[e]=t,this.forceUpdate()},this.handleSave=()=>{this.props.onSave(this.props.config)}}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"mb-5 mb-xl-0",xl:"12"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,null,n.a.createElement("div",{className:"d-flex float-right"},n.a.createElement(B.a,{className:"float-right",color:"primary",href:"#pablo",onClick:this.handleSave,size:"sm"},"Save"))),n.a.createElement(L.a,null,n.a.createElement(ua,{name:"Override with Environment Variables",tooltip:"Check this if you are passing the configuration through environment variables. The below configuration may be overridden by the environment variables.",itemKey:"OVERRIDE_WITH_ENV",value:this.props.config.OVERRIDE_WITH_ENV,onChange:this.handleParamValueChange}),n.a.createElement(pa.a,null),n.a.createElement(ua,{name:"Callback URL",itemKey:"CALLBACK_ENDPOINT",value:this.props.config.CALLBACK_ENDPOINT,onChange:this.handleParamValueChange}),n.a.createElement(ua,{name:"FSP ID",itemKey:"FSPID",value:this.props.config.FSPID,onChange:this.handleParamValueChange}),n.a.createElement(ua,{name:"Send Callback",itemKey:"SEND_CALLBACK_ENABLE",value:this.props.config.SEND_CALLBACK_ENABLE,onChange:this.handleParamValueChange}),n.a.createElement(ua,{name:"Validate Transfers with previous quote",itemKey:"TRANSFERS_VALIDATION_WITH_PREVIOUS_QUOTES",value:this.props.config.TRANSFERS_VALIDATION_WITH_PREVIOUS_QUOTES,onChange:this.handleParamValueChange}),n.a.createElement(ua,{name:"Enable Version Negotiation Support",itemKey:"VERSIONING_SUPPORT_ENABLE",value:this.props.config.VERSIONING_SUPPORT_ENABLE,onChange:this.handleParamValueChange}))))))}}class ma extends n.a.Component{render(){return n.a.createElement(F.a,{className:"mb-4"},n.a.createElement(N.a,{lg:"4"},n.a.createElement("h4",null,this.props.name)),n.a.createElement(N.a,{lg:"8"},"boolean"===typeof this.props.value?this.props.value?n.a.createElement(re.a,{type:"check"}):n.a.createElement(re.a,{type:"close"}):n.a.createElement(ge.a,{color:"red"},this.props.value)))}}class da extends n.a.Component{render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"mb-5 mb-xl-0",xl:"12"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(L.a,null,n.a.createElement(ma,{name:"Callback URL",value:this.props.config.CALLBACK_ENDPOINT,onChange:this.handleParamValueChange}),n.a.createElement(ma,{name:"FSP ID",value:this.props.config.FSPID,onChange:this.handleParamValueChange}),n.a.createElement(ma,{name:"Send Callback",value:this.props.config.SEND_CALLBACK_ENABLE,onChange:this.handleParamValueChange}),n.a.createElement(ma,{name:"Validate Transfers with previous quote",value:this.props.config.TRANSFERS_VALIDATION_WITH_PREVIOUS_QUOTES,onChange:this.handleParamValueChange}),n.a.createElement(ma,{name:"Enable Version Negotiation Support",value:this.props.config.VERSIONING_SUPPORT_ENABLE,onChange:this.handleParamValueChange}))))))}}class ga extends n.a.Component{constructor(){var e;super(),e=this,this.getUserConfiguration=Object(ee.a)(Y.a.mark((function t(){var a,s,n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Getting user config ...",key:"getUserConfigProgress"}),t.next=3,ce.a.get("http://localhost:5050/api/config/user");case 3:return a=t.sent,s=a.data.runtime,n=a.data.stored,t.next=8,e.setState({userConfigRuntime:s,userConfigStored:n});case 8:ne.a.success({content:"Loaded",key:"getUserConfigProgress",duration:-1});case 9:case"end":return t.stop()}}),t)}))),this.handleSaveUserConfig=function(){var t=Object(ee.a)(Y.a.mark((function t(a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.a.loading({content:"Saving user config ...",key:"saveUserConfigProgress"}),t.next=3,ce.a.put("http://localhost:5050/api/config/user",a,{headers:{"Content-Type":"application/json"}});case 3:return t.next=5,e.getUserConfiguration();case 5:ne.a.success({content:"Saved",key:"saveUserConfigProgress",duration:2});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.state={userConfigRuntime:{},userConfigStored:{}}}componentDidMount(){this.getUserConfiguration()}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(W,null),n.a.createElement(u.a,{className:"mt--7",fluid:!0},n.a.createElement(F.a,null,n.a.createElement(N.a,{className:"mb-5 mb-xl-0",xl:"4"},n.a.createElement(z.a,{className:"card-profile shadow"},n.a.createElement(_.a,{className:"border-0"},n.a.createElement("h3",{className:"mb-0"},"Runtime Global Configuration")),n.a.createElement(L.a,{className:"pt-0 pt-md-4"},n.a.createElement(da,{config:this.state.userConfigRuntime})))),n.a.createElement(N.a,{xl:"8"},n.a.createElement(z.a,{className:"bg-secondary shadow"},n.a.createElement(_.a,{className:"bg-white border-0"},n.a.createElement("h3",{className:"mb-0"},"Edit Global Configuration")),n.a.createElement(L.a,null,n.a.createElement(ha,{config:this.state.userConfigStored,onSave:this.handleSaveUserConfig})))))))}}var Ea=[{path:"/index",name:"Dashboard",icon:"ni ni-tv-2 text-primary",component:Q,layout:"/admin"},{path:"/monitoring",name:"Monitoring",icon:"ni ni-glasses-2 text-primary",component:ca,layout:"/admin"},{path:"/rules_response",name:"Sync Response Rules",subTitle:"",icon:"ni ni-curved-next text-primary",component:lt,layout:"/admin"},{path:"/rules_validation",name:"Validation Rules",subTitle:"(Error Callbacks)",icon:"ni ni-bullet-list-67 text-primary",component:ct,layout:"/admin"},{path:"/rules_callback",name:"Callback Rules",subTitle:"(Success Callbacks)",icon:"ni ni-bullet-list-67 text-primary",component:ht,layout:"/admin"},{path:"/outbound_request",name:"Outbound Request",icon:"ni ni-money-coins text-blue",component:aa,layout:"/admin"},{path:"/settings",name:"Settings",icon:"ni ni-settings text-blue",component:ga,layout:"/admin"}];class fa extends n.a.Component{constructor(...e){super(...e),this.getRoutes=e=>e.map((e,t)=>"/admin"===e.layout?n.a.createElement(c.a,{path:e.layout+e.path,component:e.component,key:t}):null),this.getBrandText=e=>{for(let t=0;t<Ea.length;t++)if(-1!==this.props.location.pathname.indexOf(Ea[t].layout+Ea[t].path))return Ea[t].name;return"Brand"}}componentDidUpdate(e){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainContent.scrollTop=0}render(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(q,Object.assign({},this.props,{routes:Ea,logo:{innerLink:"/admin/index",imgSrc:a(690),imgAlt:"..."}})),n.a.createElement("div",{className:"main-content",ref:"mainContent"},n.a.createElement(g,Object.assign({},this.props,{brandText:this.getBrandText(this.props.location.pathname)})),n.a.createElement(o.a,null,this.getRoutes(Ea)),n.a.createElement(u.a,{fluid:!0},n.a.createElement(f,null))))}}var ba=fa;l.a.render(n.a.createElement(i.a,null,n.a.createElement(o.a,null,n.a.createElement(c.a,{path:"/admin",render:e=>n.a.createElement(ba,e)}),n.a.createElement(p.a,{from:"/",to:"/admin/index"}))),document.getElementById("root"))},88:function(e,t,a){const s=a(64);s.elements.Rectangle.prototype.draw=function(){var e,t,a,s,n,r,l,i=this._chart.ctx,o=this._view,c=o.borderWidth;if(o.horizontal?(e=o.base,t=o.x,a=o.y-o.height/2,s=o.y+o.height/2,n=t>e?1:-1,r=1,l=o.borderSkipped||"left"):(e=o.x-o.width/2,t=o.x+o.width/2,a=o.y,n=1,r=(s=o.base)>a?1:-1,l=o.borderSkipped||"bottom"),c){var p=Math.min(Math.abs(e-t),Math.abs(a-s)),u=(c=c>p?p:c)/2,h=e+("left"!==l?u*n:0),m=t+("right"!==l?-u*n:0),d=a+("top"!==l?u*r:0),g=s+("bottom"!==l?-u*r:0);h!==m&&(a=d,s=g),d!==g&&(e=h,t=m)}i.beginPath(),i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=c;var E=[[e,s],[e,a],[t,a],[t,s]],f=["bottom","left","top","right"].indexOf(l,0);function b(e){return E[(f+e)%4]}-1===f&&(f=0);var C=b(0);i.moveTo(C[0],C[1]);for(var v=1;v<4;v++){C=b(v);let e=v+1;4===e&&(e=0);let t=E[2][0]-E[1][0],a=E[0][1]-E[1][1],s=E[1][0],n=E[1][1];var y;(y=6)>a/2&&(y=a/2),y>t/2&&(y=t/2),i.moveTo(s+y,n),i.lineTo(s+t-y,n),i.quadraticCurveTo(s+t,n,s+t,n+y),i.lineTo(s+t,n+a-y),i.quadraticCurveTo(s+t,n+a,s+t-y,n+a),i.lineTo(s+y,n+a),i.quadraticCurveTo(s,n+a,s,n+a-y),i.lineTo(s,n+y),i.quadraticCurveTo(s,n,s+y,n)}i.fill(),c&&i.stroke()};var n="Open Sans",r={100:"#f6f9fc",200:"#e9ecef",300:"#dee2e6",400:"#ced4da",500:"#adb5bd",600:"#8898aa",700:"#525f7f",800:"#32325d",900:"#212529"},l={default:"#172b4d",primary:"#5e72e4",secondary:"#f4f5f7",info:"#11cdef",success:"#2dce89",danger:"#f5365c",warning:"#fb6340"},i="#FFFFFF",o="transparent";let c={options:{scales:{yAxes:[{gridLines:{color:r[900],zeroLineColor:r[900]},ticks:{callback:function(e){if(!(e%10))return"$"+e+"k"}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",s=e.yLabel,n="";return t.datasets.length>1&&(n+=a),n+="$"+s+"k"}}}},data1:e=>({labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[0,20,10,30,15,40,20,60,60]}]}),data2:e=>({labels:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Performance",data:[0,20,5,25,10,30,15,40,40]}]})};e.exports={chartOptions:function(){var e={defaults:{global:{responsive:!0,maintainAspectRatio:!1,defaultColor:r[600],defaultFontColor:r[600],defaultFontFamily:n,defaultFontSize:13,layout:{padding:0},legend:{display:!1,position:"bottom",labels:{usePointStyle:!0,padding:16}},elements:{point:{radius:0,backgroundColor:l.primary},line:{tension:.4,borderWidth:4,borderColor:l.primary,backgroundColor:o,borderCapStyle:"rounded"},rectangle:{backgroundColor:l.warning},arc:{backgroundColor:l.primary,borderColor:i,borderWidth:4}},tooltips:{enabled:!0,mode:"index",intersect:!1}},doughnut:{cutoutPercentage:83,legendCallback:function(e){var t=e.data,a="";return t.labels.forEach((function(e,s){var n=t.datasets[0].backgroundColor[s];a+='<span class="chart-legend-item">',a+='<i class="chart-legend-indicator" style="background-color: '+n+'"></i>',a+=e,a+="</span>"})),a}}}};return s.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:r[300],drawBorder:!1,drawTicks:!1,lineWidth:0,zeroLineWidth:0,zeroLineColor:r[300],zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){if(!(e%10))return e}}}),s.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:10}),e},parseOptions:function e(t,a){for(var s in a)"object"!==typeof a[s]?t[s]=a[s]:e(t[s],a[s])},chartExample1:c,chartExample2:{options:{scales:{yAxes:[{ticks:{callback:function(e){if(!(e%10))return e}}}]},tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex].label||"",s=e.yLabel,n="";return t.datasets.length>1&&(n+=a),n+=s}}}},data:{labels:["GET /parties/{Type}/{ID}","POST /quotes","POST /transfers"],datasets:[{label:"Sales",data:[25,20,30]}]}}}}},[[316,1,2]]]);
//# sourceMappingURL=main.5775a44b.chunk.js.map